/*! Build Version: 16.09.01 - Build Time: Thu Feb 18 2016 17:52:19 */

define("sc-analytics-core/javascript/util/browserStorage",function(){return{saveValue:function(a,b,c){var d,e;if("undefined"==typeof c||"local"!==c?(c="session",d=sessionStorage,e=localStorage):(d=localStorage,e=sessionStorage),"undefined"!=typeof e["DIO"+a]){if("undefined"==typeof d["DIO"+a])return!1;e.removeItem("DIO"+a)}return"object"==typeof b?d["DIO"+a]="%%DIOJSON%%"+JSON.stringify(b):("string"==typeof b||"number"==typeof b)&&(d["DIO"+a]=b),c},getValue:function(a,b){var c=null;return"undefined"!=typeof sessionStorage["DIO"+a]?c=sessionStorage["DIO"+a]:"undefined"!=typeof localStorage["DIO"+a]&&(c=localStorage["DIO"+a]),null!==c?(b===!0&&(sessionStorage.removeItem("DIO"+a),localStorage.removeItem("DIO"+a)),"%%DIOJSON%%"===c.substring(0,11)?JSON.parse(c.substring(11)):c):void 0},removeItem:function(a){localStorage.removeItem("DIO"+a),sessionStorage.removeItem("DIO"+a)},initialize:function(a){return a.resolve()}}}),define("sc-analytics-core/javascript/util/cookies",["sc-analytics-core/javascript/util/logger"],function(a){return{getCookie:function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){var e=$.trim(c[d]);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return void 0},setCookie:function(a,b,c,d){var e,f,g=new Date;c?(g.setTime(g.getTime()+24*c*60*60*1e3),e="expires="+g.toGMTString()):e="expires=Thu, 31 Dec 2099 00:00:00 GMT;",f=a+"="+b+"; "+e+"; path=/;",d===!0?f+="domain=.bestbuy.com;":d&&d.indexOf("bestbuy")>-1&&(f+="domain="+d+";"),document.cookie=f},removeCookie:function(a,b){var c=a+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/;";b===!0?c+="domain=.bestbuy.com;":b&&(c+="domain="+b+";"),document.cookie=c},getLegacyCookieObject:function(){var b=this.getCookie("track"),c={};if(b){b=b.replace(/'/gi,'"');var d;try{d=JSON.parse(b)}catch(e){a.error("Failed to parse JSON: ",e)}c=d||{}}return _.each(c,function(a,b){c[b]=unescape(a)}),c},setLegacyCookie:function(a,b,c){var d=this.getLegacyCookieObject();"delete"===c?delete d[a]:d[a]=b.toString().replace(/\xA0/g," "),_.each(d,function(a,b){d[b]=escape(a)});var e=JSON.stringify(d);this.setCookie("track",e,null,!0)},initialize:function(a){return a.resolve()}}}),define("sc-analytics-core/javascript/util/logger",function(){var a=[],b=function(a){this.prefix=a||""};b.prototype={_getArgsAsArray:function(a){return Array.prototype.slice.call(a)},getCustomInstance:function(a){return a=this.prefix?this.prefix+": "+a:a,new b(a)},doLog:function(b,c,d){var e=require("sc-analytics-core/javascript/analyticsTracker");(b||b instanceof Array)&&(c=c||"log",this.prefix&&b.unshift(this.prefix.toUpperCase()+": "),_.contains(a,location.hostname)&&e.getOption("DEVMODE")!==!0||window.console&&("function"==typeof console[c]?window.console[c].apply(window.console,b):(b.unshift(c.toUpperCase()+": "),window.console.log.apply(window.console,b))))},log:function(){this.doLog(this._getArgsAsArray(arguments))},error:function(){this.doLog(this._getArgsAsArray(arguments),"error")},info:function(){this.doLog(this._getArgsAsArray(arguments),"info")},warn:function(){this.doLog(this._getArgsAsArray(arguments),"warn")},getDisabledHosts:function(){return a},setDisabledHosts:function(b){a=b},initialize:function(a){return a.resolve()}};var c=new b;return c._Logger=b,c}),define("sc-analytics-core/javascript/util/queryParameters",function(){return{getQueryParams:function(a){var b=(a||window.location.search).substring(1);return b?_.chain(b.split("&")).map(function(a){var b=a.split("=");return[b[0],decodeURIComponent(b[1])]}).object().value():!1},initialize:function(a){return a.resolve()}}}),define("sc-analytics-core/javascript/util/scheduler",function(){var a=function(a){this._interval=a,this._lastOpAt=null,this._queue=[],this._working=!1};a.prototype.schedule=function(a){this._queue.push(a),this._working||this.work()},a.prototype.work=function(){var a=this._queue.shift(),b=Date.now(),c=b-this._lastOpAt;return this._working=!0,a?void(null===this._lastOpAt||c>=this._interval?(this.setLastOpTime(),a(),window.setTimeout(this.work.bind(this),this._interval)):window.setTimeout(this.work.bind(this),this._interval-c)):(this._lastOpAt=null,void(this._working=!1))},a.prototype.setLastOpTime=function(){this._lastOpAt=Date.now()};var b=new a(300);return{_rateLimit:b,RateLimiter:a,initialize:function(a){return a.resolve(b)}}}),define("sc-analytics-core/javascript/modules/lidTracking",function(a){function b(a){var b=a.data("track")===!0?a.text():a.data("track"),c=a.parents("[data-context]");b=b.toString().replace(/[^a-z0-9\s_]/gi,"").replace(/\xA0/g," ");var d=[b];return _.each(c,function(a){d.push($(a).data("context"))}),{target:a,trackValue:b,contextString:d.reverse().join(": "),contexts:d.reverse()}}function c(){var a=h.getCookie("dio-lid"),b=h.getCookie("dio-page");if(a&&b){var c=a,f=b;d(f,c),e("lid","","delete"),e("page","","delete")}}function d(a,b){"hdr"===b.substring(0,3)||"ft"===b.substring(0,2)||"ubr"===b.substring(0,3)?g.setData("headerFooter",b):g.setData("previousLid",a+": "+b)}function e(a,b,c){"delete"===c?h.removeCookie("dio-"+a):h.setCookie("dio-"+a,b.replace(/[;,\s=]/g,"_"),30)}var f,g=a("sc-analytics-core/javascript/analyticsTracker"),h=a("sc-analytics-core/javascript/util/cookies"),i=(g.getOption("contractMap"),a("sc-analytics-core/javascript/siteCatalyst"),g.getData());return $("body").on("click","[data-track]",function(a){var c=$(a.currentTarget),d=b(c);window.addEventListener("beforeunload",function(a){e("lid",d.contextString),e("page",i.pageId)}),f=setTimeout(function(){e("lid",d.contextString,"delete"),e("page",i.pageId,"delete"),g.setData("previousLid",i.pageId+": "+d.contextString),g.sendEventData(g.options.data)},2e3)}),$(".banners iframe").load(function(){$(this).contents().find("body [data-track]").on("click",function(a){var c=$(a.currentTarget),d=b(c);e("lid",d.contextString),e("page",i.pageId),f=setTimeout(function(){e("lid",d.contextString,"delete"),e("page",i.pageId,"delete");var a={lastLink:i.pageId+":"+d.contextString};g.sendEventData(a)},2e3)})}),$(window).on("beforeunload",function(){clearTimeout(f)}),{buildContext:"",initialize:function(a){return this.buildContext=b,c(),a.resolve()}}}),define("sc-analytics-core/javascript/modules/observatory",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/siteCatalyst","sc-analytics-core/javascript/util/logger"],function(a,b,c){function d(b){if(!_.isString(b.name))throw new Error("event name is not a String");if(!_.isString(b.pageType))throw new Error("event pageType is not a String");if(!_.isBoolean(b.hasData))throw new Error("event hasData is not Boolean");if(!_.isArray(b.eventDatas))throw new Error("event eventDatas is not an Array");if(!_.isArray(b.variableMaps))throw new Error("event variableMaps is not an Array");return this.logger=e,this.id=b.id,this.name=b.name,this.pageType=b.pageType,this.hasData=b.hasData,this.keyMap=b.eventDatas,this.variableMap=b.variableMaps,a.on("observatory:"+this.name,this.getHandler(),this),this}var e,f={logger:c.getCustomInstance("OBSERVATORY"),_handlers:[],_EventHandler:d,_config:a.options.observatoryConfig||null,getEvents:function(){return this.getConfig().filter(function(b,c,d,e){var f=a.getData("pageType")||"";return 0===f.indexOf(b.pageType)})},registerEvents:function(a){if(!_.isArray(a))throw new Error("registerEvents was not passed an Array");a.map(function(a){this._handlers.push(new this._EventHandler(a))}.bind(this))},setConfig:function(a){return _.isObject(a)?void(this._config=a):void this.logger.error("config must be an object")},getConfig:function(){return this._config},hasConfig:function(){return!!this._config},initialize:function(a){return this.hasConfig()?this.registerEvents(this.getEvents()):this.logger.warn("No config found"),a.resolve()}};return e=f.logger.getCustomInstance("EVENT HANDLER"),d.prototype={_buildRegExp:function(a){try{return 0===a.indexOf("/")?(split=a.split("/"),pattern=split[1],flags=split[2]):pattern=a,new RegExp(pattern,flags)}catch(b){return null}},_getDataByKeyMap:function(a){var b={};return this.keyMap.map(function(c){if(_.has(a,c.key)){var d=_.get(a,c.key),e=this._buildRegExp(c.regex);if(!e)return void this.logger.error("Key `"+c.key+"`, invalid regex provided from `"+this.name+"`");e.test(d)?_.set(b,c.key,d):this.logger.warn("Key `"+c.key+"` failed to pass test `"+c.regex+"` from `"+this.name+"`")}else c.isRequired&&this.logger.error("Required data key `"+c.key+"` is missing from `"+this.name+"`")}.bind(this)),b},_formatValue:function(a,b){try{var c=_.template(a,{interpolate:/{{([\s\S]+?)}}/g});return c(b)}catch(d){return this.logger.error("Failed to build tracking value for variable string"),null}},_buildEventData:function(a){var b={};return this.variableMap.map(function(c){var d=this._formatValue(c.value,a);if(!d)throw new Error("Failed to build value");b[c.name]=d}.bind(this)),b},_handler:function(a){var c,d,e=this._getDataByKeyMap(a);return this.hasData&&Object.keys(e).length<1&&this.logger.warn("Event `"+this.name+"` is configured to have data but none found"),c=this._buildEventData(e),_.isObject(c)&&Object.keys(c).length<1?void this.logger.error("Event `"+this.name+"` didn't have any data to track"):(d=Object.keys(c).map(function(a){return b.setProperty(a,c[a]),a}).join(","),b.setLinkTrackVars(d),void b.trackLink(!0,"o",this.name))},getHandler:function(){return this._handler},getLogger:function(){return this.logger},unregister:function(){try{window.EventManager.off(this.name,this.getHandler(),this)}catch(a){this.logger.error("Failed to unregister event `"+this.name)}}},f}),define("sc-analytics-core/javascript/siteCatalyst",["sc-analytics-core/javascript/util/logger"],function(a){var b={cookieWrite:function(b,c,d){try{window.s.Util.cookieWrite(b,c,d)}catch(e){a.error(e)}},cookieRead:function(b){try{window.s.Util.cookieRead(b)}catch(c){a.error(c)}},clearVars:function(){try{window.s.clearVars()}catch(b){a.error(b)}},changeReportSuite:function(b){try{window.s.sa(b)}catch(c){a.error(c)}},getQueryParam:function(b,c,d){try{window.s.Util.getQueryParam(b,c,d)}catch(e){a.error(e)}},mapVariables:function(b,c,d){var e=[],f="",g=/(prop\d\d\d?)|(eVar\d\d\d?)|(products)|(events)/;try{Object.keys(b).map(function(a){"undefined"!=typeof c[a]&&(this.setProperty(c[a],b[a]),d&&(g.test(c[a])&&e.push(c[a]),"events"===c[a]&&(f=b[a])))}.bind(this)),this.setLinkTrackVars(e.join(",")),this.setLinkTrackEvents(f)}catch(h){a.error(h)}},trackPage:function(){try{window.s.t()}catch(b){a.error(b)}},trackLink:function(b,c,d){try{window.s.tl(b,c,d)}catch(e){a.error(e)}},setLinkTrackEvents:function(b){try{window.s.linkTrackEvents=b}catch(c){a.error(c)}},setLinkTrackVars:function(b){try{window.s.linkTrackVars=b}catch(c){a.error(c)}},setPageName:function(b){try{window.s.pageName=b}catch(c){a.error("setPageName: "+c)}},removeProperty:function(b){try{delete window.s[b]}catch(c){a.error(c)}},setProperty:function(b,c){try{window.s[b]=c}catch(d){a.error(d)}},urlEncode:function(b){try{window.s.urlEncode(b)}catch(c){a.error(c)}},urlDecode:function(b){try{window.s.Util.urlEncode(b)}catch(c){a.error(c)}}};return b}),define("sc-analytics-core/javascript/analyticsTracker",["sc-analytics-core/javascript/siteCatalyst","sc-analytics-core/javascript/util/logger","jquery","lodash","bluebird"],function(a,b,c,d,e){function f(){this.setData("scEventsArray",[])}var g=c("div#analytics-data"),h=c("div#analytics-user-data");return window.track||(window.track={}),c.extend(window.track,g.data(),h.data()),f.prototype={siteCatalyst:a,on:function(){this.options.events.on.apply(null,arguments)},off:function(){this.options.events.off.apply(null,arguments)},when:function(){this.options.events.when.apply(null,arguments)},once:function(){this.options.events.once.apply(null,arguments)},info:function(){this.options.events.info.apply(null,arguments)},trigger:function(){this.options.events.trigger.apply(null,arguments)},triggerSignal:function(){this.options.events.triggerSignal.apply(null,arguments)},options:{DEVMODE:!1,signalTagSupported:!1,signalSiteId:null,signalLoaded:!1,data:d.clone(window.track||{}),globalDataSource:function(){return window.track||{}},supportedHosts:["www.bestbuy.com","www-ssl.bestbuy.com"],pageNameProperties:["uberCatName","parentCatName","catName"],siteName:"",trackingFiles:[],eventDataKeys:["pageName"],events:{on:d.bind(EventManager.on,EventManager),off:d.bind(EventManager.off,EventManager),when:d.bind(EventManager.when,EventManager),once:d.bind(EventManager.once,EventManager),info:d.bind(EventManager.info||function(){},EventManager),trigger:d.bind(EventManager.trigger,EventManager),triggerSignal:d.bind(c(window).trigger,c(window))},contractMap:{pageName:"pageName",products:"products",scProducts:"products"}},reloadData:function(){this.options.data=window.dioPageData=d.merge(d.clone(this.options.globalDataSource()),{scEventsArray:[]})},buildTrackingValue:function(a,b,c){var e=d.reduce(d.pick(c||this.options.data,a),function(a,c){return c?a?a+b+c:c:a});return e||null},getPageName:function(){return this.buildTrackingValue(this.options.pageNameProperties,": ")},clearSiteCatVars:function(){this.siteCatalyst.clearVars()},logAnalyticsError:function(a){b.error(a)},sendTrackingData:function(a){var b,c=this;this.onBeforeSendData&&this.onBeforeSendData(),this.options.signalTagSupported?"undefined"!=typeof window.abTestFramework&&window.abTestFramework?(b=setTimeout(function(){c.trigger("analytics:ready")},500),this.when("abtest:evars:ready",function(){clearTimeout(b),c.trigger("analytics:ready")})):this.trigger("analytics:ready"):(this.siteCatalyst.mapVariables(this.getData(),this.getOption("contractMap")),this.siteCatalyst.trackPage())},sendEventData:function(a){var b={},c=this;this.onBeforeSendEvent&&this.onBeforeSendEvent(),this.options.signalTagSupported?(d.each(this.options.eventDataKeys,function(a){b[a]=null}),this.loadModules(["sc-analytics-core/javascript/util/scheduler"],!0).then(d.bind(function(e){e.schedule(function(){c.triggerSignal("analytics:signal:SiteCatalyst",d.extend(b,a))})}),this)):(this.siteCatalyst.mapVariables(a,this.getOption("contractMap"),!0),this.siteCatalyst.trackLink(!0,"o",a.linkName||"UNKWN"))},sendStateData:function(a){var b=this;this.onBeforeSendState&&this.onBeforeSendState(),this.options.signalTagSupported&&this.loadModules(["sc-analytics-core/javascript/util/scheduler"],!0).then(d.bind(function(a){a.schedule(function(){b.triggerSignal("analytics:signal:stateChange")})}),this)},getOption:function(a){return this.options[a]||null},setOptions:function(a){return c.extend(!0,this.options,a),this.options},getData:function(a){return(a?this.options.data[a]:this.options.data)||!1},setData:function(a,b){d.isObject(a)?d.extend(this.options.data,a):this.options.data[a]=b},addEvents:function(){d.each(arguments,function(a){if(!d.isString(a))throw new Error("Method expects `string`");this.options.data.scEventsArray.push(a.toString().replace(/[\,\:]/g,""))},this)},startTracking:function(a){a?(this.setData(this.options.globalDataSource()),c.when.apply(this,this._initializeModules(a)).done(d.bind(function(a){this.sendTrackingData(),this.loadSignal()},this))):(this.sendTrackingData(),this.loadSignal())},loadModules:function(a,b){var e,f=c.Deferred();if(b&&(e=c.Deferred(),f.done(d.bind(function(a){c.when.apply(this,this._initializeModules(a)).done(e.resolve)},this))),d.isFunction(a))a(f);else{if(!d.isArray(a))throw new Error("Method expects `Array` or `Function`");require(a,function(){f.resolve(arguments)})}return b?e:f},setAction:function(a,b){this[a]=d.bind(b,this)},loadSignal:function(){if(this.getOption("signalSiteId")&&!this.getOption("signalLoaded")){var a=document.head,b=document.createElement("script");b.async=!0,b.src="//s.btstatic.com/tag.js#site="+this.getOption("signalSiteId"),a.appendChild(b),this.setOptions({signalLoaded:!0})}},delayTrack:function(){return new e(function(a,b){var c=this.getOption("globalDataSource")();c&&c.delayTrack?this.when("page:ready",function(){a()}):a()}.bind(this))},_initializeModules:function(a){var b=[];return d.each(a,function(a){if("undefined"!=typeof a){var e=c.Deferred(),f=a.initialize?a.initialize:function(){};a.initialize=d.once(f),b.push(a.initialize.call(a,e))}}),b}},d.bindAll(new f)}),define("analytics-dotcom/helpers/AddToCartImpressionCounter",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/logger"],function(a,b){var c={_logger:b.getCustomInstance("AddToCartImpressionCounter"),_selectorList:['.cart-button:visible:contains("a")'],getCount:function(){var a=0;try{var a=$(this._selectorList.join(",")).length}catch(b){this._logger.error("Failed to get count.",b)}return a}};return c}),define("analytics-dotcom/modules/accessoryFinder",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/browserStorage","sc-analytics-core/javascript/util/logger"],function(a,b,c){var d=a.getData(),e={};return{_buildProductsOnOpen:function(b){return b?a.getProductString(_.map(b,function(a){return{sku:a.skuId}})):void c.error("No parameter passed to listener")},_signalSiteCatalyst:function(b,d){d?d.scProducts&&d.scEvents&&-1===d.scProducts.indexOf("eVar2")&&-1===d.scEvents.indexOf("event7")&&(e.skuId=d.scProducts.split(";")[1],a.setData("driverProduct",{skuId:d.scProducts.split(";")[1]})):c.error("No parameter passed to event")},_bbyCartAddSuccess:function(b){b?(e.skuId=b.skuId,a.setData("driverProduct",{skuId:b.skuId})):c.error("No parameter passed to event")},_addToCart:function(b){b?(e.skuId=b.sku,b.skuId&&b.skuId.sku&&a.setData("driverProduct",{skuId:b.skuId.sku.skuId})):c.error("No parameter passed to event")},_AFProductClick:function(){b.saveValue("accessoryFinderClick","lbox:PDPclick","session")},_AFOpen:function(b){if(b){var e=b.accessories,f={scEvents:"event7",scProducts:this._buildProductsOnOpen(e),pageName:d.pageName+":lbox"};a.sendEventData(f),a.setData("isAccessoryFinderOpen",!0)}else c.error("No parameter passed to event")},_AFAddedToCart:function(b){if(b){var e,f="",g="";b.price&&b.price.pricingType&&-1!==b.price.pricingType.indexOf("MAP")?(e="MAP",f="see price in cart"):b.price&&b.price.pricingType&&-1!==b.price.pricingType.indexOf("ICR")?(e="ICR",f="see price in checkout"):e="",b.warrantySkuType&&b.warrantySkuType.indexOf("APPLECARE")>-1&&(g="AC");var h={scEvents:"scAdd,event5,"+(b.warranty||b.warrantySkuType?"event10":"event8")+("MAP"===e?",event99":"")+("ICR"===e?",event100":""),scProducts:a.getProductString({sku:b.skuId,events:{event5:b.price&&b.price.eachPrice?b.price.eachPrice:b.price.currentPrice?b.price.currentPrice:""},eVars:{eVar7:"lbox:"+d.templateName,eVar2:d.skuId||(d.driverProduct?d.driverProduct.skuId:""),eVar40:a.getDate()}}),clickAction:"lbox:"+(b.warranty||b.warrantySkuType?g+"PlanAddToCart":"ProductAddToCart"),seePriceIn:f};a.sendEventData(h)}else c.error("No parameter passed to event")},_AFClose:function(){a.setData("isAccessoryFinderOpen",!1),a.sendEventData({linkName:"lbox:accessory:close",clickAction:"lbox:accessory:close",pageName:d.pageName})},_setEvents:function(){$(window).on("analytics:signal:SiteCatalyst",this._signalSiteCatalyst),a.on("bby-cart:add-to-cart-success",this._bbyCartAddSuccess),a.on("addToCart",this._addToCart),a.on("accessoryFinder:productClick",this._AFProductClick),a.on("accessoryFinder:open",this._AFOpen.bind(this)),a.on("accessoryFinder:addedToCart",this._AFAddedToCart),a.on("accessoryFinder:close",this._AFClose)},initialize:function(a){return this._setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/accountHome",["sc-analytics-core/javascript/analyticsTracker"],function(a){var b=a.getData();return{_signalReady:function(){a.when("analytics:myBbyUpdate:lboxOpen",this._lboxOpen)},_lboxOpen:function(){a.sendEventData({clickAction:b.pageName+": AHLightBox"})},_setEvents:function(){a.when("analytics:signal:ready",this._signalReady)},initialize:function(a){return this._setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/activatedDevices",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/logger"],function(a,b){var c=a.getData();return{_planDetails:function(){a.sendEventData({linkName:c.pageName+": View Plan Details"})},_numberOption:function(c){c?a.sendEventData({clickAction:"mobilepkg: NumberPortingPage: "+(c.isPort?"TransferNumber":"GetNewNumber")}):b.error(new Error("No parameter passed to event"))},_interactionLg:function(c){c?a.sendEventData({clickAction:"mobilepkg: CarrierCheckPage: "+("print"===c.targetLink?"PrintAgreement":"Tooltip")}):b.error(new Error("No parameter passed to event"))},_interactionSm:function(){a.sendEventData({clickAction:"mobilepkg: CarrierCheckPage: Tooltip"})},_tooltip:function(){a.sendEventData({clickAction:"mobilepkg: DepositRequiredPage: Tooltip"})},_printLg:function(c){c?a.sendEventData({clickAction:"mobilepkg: IBTerms&Conditions: PrintAgreement: "+("electronic"===c.docName?"ElectronicConsent":"RetailInstallment")}):b.error(new Error("No parameter passed to event"))},_printSm:function(){a.sendEventData({clickAction:"mobilepkg: IBTerms&Conditions: PrintAgreement: RetailInstallment"})},_noThanks:function(){a.sendEventData({clickAction:"mobilepkg: OfferSelectionPage: NoThanks"})},_protection:function(){a.sendEventData({pageName:"Cell Phones: Upgrade: Add AppleCare",clickAction:"mobilepkg: AccessoryPage: AppleCareRadio",linkName:"mobilepkg: AccessoryPage: AppleCareRadio"})},_setEvents:function(){a.on("noContractPlanList:planDetails",this._planDetails),a.on("analytics:activatedDevices:numberOption",this._numberOption),a.on("analytics:activatedDevices:creditCheck:interactionLg",this._interactionLg),a.on("analytics:activatedDevices:creditCheck:interactionSm",this._interactionSm),a.on("analytics:activatedDevices:deposit:tooltip",this._tooltip),a.on("analytics:activatedDevices:installmentBilling:printLg",this._printLg),a.on("analytics:activatedDevices:installmentBilling:printSm",this._printSm),a.on("analytics:activatedDevices:Offers:noThanks",this._noThanks),a.on("analytics:radioButtonClick:protection",this._protection)},initialize:function(a){return this._setEvents(),a.resolve()}}}),define("analytics-dotcom/modules/addLine",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/logger"],function(a,b){var c=a.getData();return{_contractDuration:function(d){d?a.sendEventData({clickAction:"Add a Line: "+d.selected,pageName:c.pageName}):b.error(new Error("No parameter passed to event"))},_contractLearnHow:function(){a.sendEventData({clickAction:"Add a Line: Learn how you can save",pageName:c.pageName})},_contractSelected:function(d){d?a.sendEventData({clickAction:"Add a Line: "+d.selected,pageName:c.pageName}):b.error(new Error("No parameter passed to event"))},_monthlyCharges:function(){a.sendEventData({clickAction:"Click: Additional Monthly Charges",pageName:c.pageName})},_setEvents:function(){a.on("addLine:contractDuration",this._contractDuration),a.on("addLine:contractLearnHow",this._contractLearnHow),a.on("addLine:contractSelected",this._contractSelected),a.on("addLine:monthlyCharges",this._monthlyCharges)},initialize:function(a){return this._setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/addToCartHandler",["sc-analytics-core/javascript/analyticsTracker","analytics-dotcom/modules/utilities"],function(a,b){var c=a.getData(),d=function(a,b){return this.addFunc=b,this.location=a,this.eventHandler.bind(this)};return d.prototype={eventHandler:function(b){if(b){if(this.buildProduct(b),this.buildData(b),_.isFunction(this.addFunc))var d=this.addFunc.call(this,b);d!==!1&&(d&&"object"==typeof d&&(signalEventData=_.merge(this.signalEventData,d)),a.sendEventData(this.signalEventData),a.setData("cartItemCount",++c.cartItemCount))}},buildProduct:function(a){this.product={},a.requestOptions.skuId&&_.extend(this.product,a.requestOptions),this.product.events={}},buildData:function(d){this.signalEventData={};var e="",f="";if(e+="scAdd",e+=0===c.cartItemCount?",scOpen":"",e+=d.isHaccs===!0?",event21":"",e+="map"===b.getPricingType(d.requestOptions.pricingType)?",event99":"",e+="icr"===b.getPricingType(d.requestOptions.pricingType)?",event100":"",e+=a.parsePrice(this.product.price)?",event5":"",d.requestOptions&&d.requestOptions.pricingType)switch(d.requestOptions.pricingType){case"refurbished":f="refurbished";break;case"clearance":f="clearance"}this.signalEventData={scProducts:b.buildProductString(_.merge({},this.product,{eVars:{eVar7:this.location||void 0,eVar76:function(){return f?f:""}()}})),scEvents:e}}},d}),define("analytics-dotcom/modules/cart",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/cookies","analytics-dotcom/modules/addToCartHandler"],function(a,b,c){var d=a.getData();return{_buildPageName:function(){d.cleanedParentCatName=d.parentCatName?d.parentCatName.replace(/(registered)|(guest)/gi,""):null;var b=["uberCatName","cleanedParentCatName","catName"];return a.buildTrackingValue(b,": ")},_buildProducts:function(b){return a.getProductString(_.map(b,function(a){var b=_.where(a.item.availableFulfillmentTypes,{label:"Shipping"}),c="";return _.each(b,function(a){c=_.pluck(a.levelOfServiceList,"value").join(":")}),{sku:a.item.skuId,quantity:a.quantity?a.quantity:"1",price:a.item.price&&a.item.price.eachPrice?a.item.price.eachPrice:"",eVars:c?{eVar45:c}:null}}))},setData:function(){a.setData("pageName",this._buildPageName()),a.setData("cartInfo",window.cartOrderInit),a.addEvents("scView"),$(".apple-pay-btn:not(.inactive)").length>0&&a.addEvents("event34"),a.setData("templateName","CRT"),d.cartInfo&&d.cartInfo.lineItems&&a.setData("scProducts",this._buildProducts(d.cartInfo.lineItems)),"cart,deliveryDate"===d.pageType&&a.setData("pageName","Fulfillment Options Lbox Delivery")},_popupLaunch:function(b,c,d){var e=c+":"+d+": open",f={pageName:d,clickAction:e,linkName:e};a.sendEventData(f)},_continueShoppingOpen:function(){var b={clickAction:"Cart:Continue_Shopping"};a.sendEventData(b)},_continueShoppingClick:function(a){b.setLegacyCookie("page",d.pageName),b.setLegacyCookie("lid","Cart:Continue_Shopping:"+$(a).text())},_changeFulfillment:function(b){var c={pageName:d.pageName,scEvents:"event22",scProducts:a.getProductString({sku:b.attributes.item.skuId,events:{event22:"1"}})};a.sendEventData(c)},_quantityUpdate:function(){a.sendEventData({linkName:"CPT:Cart:Update Quantity"})},_lineItemRemove:function(b){var c=b.attributes.item.skuId,d={scEvents:"scRemove",scProducts:a.getProductString({sku:c})};a.sendEventData(d)},_warrantyAdd:function(b,c){a.sendEventData({scEvents:"scAdd,event5,event58",scProducts:a.getProductString({sku:b.skuId,events:{event5:b.price},eVars:{eVar2:b.parentSku,eVar7:"CRT",eVar40:a.getDate()}})})},_warrantyRemove:function(b){a.sendEventData({scEvents:"scRemove",scProducts:a.getProductString({sku:b.sku,quantity:b.quantity,price:b.price})})},_onCarouselLoad:function(){},_requiredParts:function(b){var c={scEvents:"scAdd",scProducts:a.getProductString({sku:b.sku,events:{event5:b.price},eVars:{eVar2:b.parentSku,eVar7:d.templateName+":ReqParts",eVar40:a.getDate()}})};a.sendEventData(c)},_isCompleteYourPurchaseAddToCart:!1,_completeYourPurchase:function(b){this._isCompleteYourPurchaseAddToCart=!0,a.sendEventData({scEvents:"scAdd",scProducts:a.getProductString({sku:b.sku,events:{event5:b.price},eVars:{eVar2:b.parentSku,eVar7:d.templateName+":CompleteYourPurchase",eVar40:a.getDate()}})})},_addToSaveForLaterSuccess:function(b){var c={scEvents:"event81",scProducts:";"+b};a.sendEventData(c)},_removeToSaveForLaterSuccess:function(b){var c={scEvents:"event82",scProducts:a.getProductString({sku:b})};a.sendEventData(c)},_moveToCartSuccess:function(b){var c=b.price?b.price:"",d={scEvents:"scAdd",scProducts:a.getProductString({sku:b.sku,events:{event5:c},eVars:{eVar7:"CRT:SaveForLater"}})};a.sendEventData(d)},_visaCheckoutLightboxLaunch:function(){a.sendEventData({linkName:"Visa Checkout Timeout Lightbox Launch"})},_pageError:function(b){a.sendEventData({errorCodes:b.message,errorLocation:d.pageName})},_setAddToCartData:function(c){if(this._isCompleteYourPurchaseAddToCart)return!1;var e;if(d.isAccessoryFinderOpen)return!1;var f=c.product,g="scAdd,event5"+(0===d.cartItemCount?",scOpen":""),h="",i="",j="",k="",l=d.recommendationsData?d.recommendationsData.epValue:"",m=/\$?\d\d?\d?\d?\d?(\.\d\d)?/;j=l||null,k=d.recommendationsData?"d=c38":"",d.recommendationsData?g+=",event55":null,c&&c.requestOptions&&m.test(c.requestOptions.price)&&(h=c.requestOptions.price),i=d.templateName,c.isHaccs&&(g+=",event21");var n={sku:f.skuId,price:h,eVars:{eVar7:i,eVar40:a.getDate(),eVar76:function(){var a="",b="",d=["undefined","null"];return c&&c.requestOptions&&(a=c.requestOptions.pricingType&&!_.contains(d,c.requestOptions.pricingType)?c.requestOptions.pricingType:"regularprice",b=c.requestOptions.condition&&!_.contains(d,c.requestOptions.condition)?c.requestOptions.condition:"new"),b+" - "+a}(),eVar77:function(){return c&&c.requestOptions&&c.requestOptions.productCondition?c.requestOptions.productCondition:void 0}()}};return e={epClick:d.recommendationsData?"d=c38":null,clickAction:j,seePriceIn:d.isIcrSku?"See Price in Checkout":d.isMapSku?"See Price in Cart":null,scEvents:g,scProducts:a.buildProductString(n)},b.setLegacyCookie("a2cTracked","true"),a.setData("recommendationsData",""),a.sendEventData(e),this._isCompleteYourPurchaseAddToCart=!1,e},setEvents:function(){a.on("dio.popup.launch",this._popupLaunch),a.on("cart:continueShopping:open",this._continueShoppingOpen),a.on("cart:continueShopping:click",this._continueShoppingClick),a.on("cart.fulfillment.changeFulfillment",this._changeFulfillment),a.on("dio.cart.quantity.update",this._quantityUpdate),a.on("backbone:model:lineItem:remove",this._lineItemRemove),a.on("warranty:add",this._warrantyAdd),a.on("warranty:remove",this._warrantyRemove),a.on("cart:onCarouselLoad",this._onCarouselLoad),a.on("cart:addToCart:requiredParts",this._requiredParts),a.on("cart:addToCart:completeYourPurchase",this._completeYourPurchase.bind(this)),a.on("cart:addToSaveForLaterSuccess",this._addToSaveForLaterSuccess),a.on("cart:removeToSaveForLaterSuccess",this._removeToSaveForLaterSuccess),a.on("cart:moveToCartSuccess",this._moveToCartSuccess),a.on("analytics:visaCheckout:timeoutLightboxLaunch",this._visaCheckoutLightboxLaunch),a.off("pageEvent:error"),a.off("pageEvent:error:client"),a.on("pageEvent:error",this._pageError),a.on("addToCart:done:success",new c("",this._setAddToCartData.bind(this)))},initialize:function(a){return this.setData(),this.setEvents(),a.resolve()}}}),define("analytics-dotcom/modules/cartGiftCards",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/cookies","sc-analytics-core/javascript/util/logger"],function(a,b,c){return{_onCartGiftCardsOpen:function(){a.sendEventData({pageName:a.getData("pageName"),clickAction:"GiftCard"})},_onCartGiftCardsNoThanks:function(c){c=c||!1,c?(b.setLegacyCookie("lid","Cart:GiftCard:NoThanks"),b.setLegacyCookie("page",a.getData("pageName"))):a.sendEventData({linkName:"Cart:GiftCard:NoThanks"})},_onCartGiftCardsAdded:function(b){if(!b)return void c.error(new Error("Missing event arguments"));var d;if(b&&b.location)switch(b.location){case"banner":d="CartGiftCardHeader";break;case"modal":d="CartGiftCardPopup"}a.sendEventData({pageName:a.getData().pageName,scEvents:"scAdd",scProducts:a.getProductString({sku:b.sku||"",quantity:b.qty||"",events:{event5:b.amount?b.amount:""},eVars:{eVar7:d?d:"lbox:GiftCard",eVar40:a.getDate()}})})},setEvents:function(){a.on("cart.giftCards.open",this._onCartGiftCardsOpen),a.on("cart.giftCards.noThanks",this._onCartGiftCardsNoThanks.bind(null,!0)),a.on("analytics:cartGiftCards:noThanks",this._onCartGiftCardsNoThanks),a.on("cart.giftCards.added",this._onCartGiftCardsAdded)},initialize:function(a){return this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/categoryListing",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/browserStorage","sc-analytics-core/javascript/util/cookies"],function(a,b,c){
var d=a.getData();return{_convertDate:function(a){return parseInt(a.substr(0,2),10).toString()+"-"+parseInt(a.substr(3,2),10).toString()+"-"+a.substr(6)},setData:function(){a.setData("templateName","BRCL"+(d.listFaceted?"F":"")),d.listFaceted&&a.setData("pageName",d.pageName+": Faceted"),a.setData("searchResultsNum",a.parseInteger(d.searchResultsNum))},setEvents:function(){$("body").on("click","[data-rank='pdp']",function(){b.saveValue("searchRank","Non-Search"),b.saveValue("searchTerm","Non-Search")}),$("body").on("click","[data-rank='reviews']",function(){b.saveValue("searchRank","Non-Search"),b.saveValue("searchTerm","Non-Search"),b.saveValue("ratingsClick","Bazaarvoice^RatingsAndReviews^Action^Read^Review^BrowseResults","session"),c.setLegacyCookie("lid",d.pageName+": list: reviews")})},initialize:function(a){return this.setData(),this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/checkout",["sc-analytics-core/javascript/analyticsTracker"],function(a){var b=a.getData();return a.setData("firstLoadFlag",!0),{_buildPageName:function(){b.cleanedParentCatName=b.parentCatName.replace(/(registered)|(guest)/gi,"");var c=["uberCatName","cleanedParentCatName","catName"];return a.buildTrackingValue(c,": ")},_pushSiteCatEvents:function(){if(b.firstLoadFlag){a.addEvents("scCheckout"),a.setData("checkoutFastTrack",b.pageName);var c={sku:_.pluck(orderData.items,"sku"),quantity:_.pluck(orderData.items,"quantity"),price:_.chain(orderData.items).pluck("meta").pluck("price").pluck("base").value()},d=[];_.each(c.sku,function(a,b){d.push({sku:a,quantity:c.quantity[b],price:c.price[b]})}),a.setData("scProducts",a.getProductString(d)),a.setData("firstLoadFlag",!1)}switch(b.catName){case"Checkout - Shipping and Pickup Options":return a.addEvents("event18"),!0;case"Checkout - Payment Info":return a.addEvents("event17"),!0;case"Checkout - Submit Order":return a.addEvents("event20"),!0;default:return!1}},_buildFulfillmentClickAction:function(a){switch(a){case"inStorePickup":return"DO_Pick_Up_Instead";case"shipping":return"DO_Ship_Instead";case"delivery":case"specialDelivery":return"DO_Deliver_Instead";default:return null}},_createAccountRequiredSent:!1,_sendCreateAccountRequired:function(){this._createAccountRequiredSent||(this._createAccountRequiredSent=!0,a.sendEventData({linkName:"Checkout: Create Account Required"}))},setData:function(){a.setData("pageName",this._buildPageName()),this._pushSiteCatEvents()},setEvents:function(){var c=this,d=!1;a.on("checkout:order:lineItems:change:fulfillmentType",function(b,d){a.sendEventData({clickAction:c._buildFulfillmentClickAction(d)})}),a.on("checkout:addressBook:open",function(){var b="Cart: Shipping Address lbox: Enter Address Button: click",c={clickAction:b,linkName:b,scEvents:"event19"};a.sendEventData(c)}),a.on("checkout:order:lineItems:remove",function(b,c){var d=b.attributes.sku,e=b.attributes.meta.price.current||b.attributes.meta.price.regular||"",f=b.attributes.quantity,g={scEvents:"scRemove",scProducts:a.getProductString({sku:d,quantity:f,price:e})};a.sendEventData(g)}),a.on("checkout:scheduleDelivery:scheduleLater",function(){a.sendEventData({clickAction:"checkout:schedulelater"})}),a.on("checkout:scheduleDelivery:haulAway",function(){a.sendEventData({clickAction:"checkout:haulaway"})}),a.on("analytics:checkout:guest:memberId:sidebar",function(){d!==!0?a.sendEventData({pageName:b.pageName,scEvents:"event24"}):d=!1}),a.on("analytics:checkout:guest:memberId:lightbox",function(){a.sendEventData({pageName:b.pageName,scEvents:"event25"}),d=!0}),a.on("analytics:3dSecure:open",function(b){var c=_.map(b.skus,function(a){return";"+a+";;;;"}).join(",");a.sendEventData({scProducts:c,linkName:"Verified by Visa Lightbox",scEvents:"event105"})}),a.on("analytics:createAccount:success",function(){a.sendEventData({scEvents:"event90"})}),a.when("analytics:signal:ready",function(){a.when("analytics:createAccount:required",function(){this._sendCreateAccountRequired()}.bind(this))}.bind(this))},initialize:function(a){return this.setData(),this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/checkoutSignIn",["sc-analytics-core/javascript/analyticsTracker"],function(a){var b=a.getData();return{_buildPageName:function(){b.cleanedParentCatName=b.parentCatName?b.parentCatName.replace(/(registered)|(guest)/gi,""):null;var c=["uberCatName","cleanedParentCatName","catName"];return a.buildTrackingValue(c,": ")},setData:function(){a.setData("pageName",this._buildPageName()),"guest"===b.catName&&track.loginRequired&&(b.pageName+=": Required")},setEvents:function(){},initialize:function(a){return this.setData(),this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/compare",["analytics-dotcom/modules/addToCartHandler","sc-analytics-core/javascript/analyticsTracker"],function(a,b){var c=b.getData();return{_buildSkus:function(a){var b=[];return _.each(a,function(a){b.push({sku:a})}),b},setData:function(){b.addEvents("event12");var a=this._buildSkus(c.compareSkus);b.setData({pageName:"Compare Page",scProducts:b.getProductString(a),templateName:"PCMP"})},setEvents:function(){b.on("addToCart:done:success",new a("PCMP"))},initialize:function(a){return this.setData(),this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/conditionalOffers",["sc-analytics-core/javascript/analyticsTracker","analytics-dotcom/modules/addToCartHandler"],function(a,b){return{setEvents:function(){a.on("addToCart:done:success",new b)},initialize:function(a){return this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/createLogin",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/cookies"],function(a,b){return{setEvents:function(){a.on("analytics:createAccountLogin:lbLaunch",function(){a.sendEventData({clickAction:"RZLB:Launch"})}),a.on("analytics:createAccountLogin:submit",function(){a.sendEventData({clickAction:"RZLB:Submit"})}),a.on("analytics:createAccountLogin:lookupError",function(){a.sendEventData({clickAction:"RZLB:other:error"})}),a.on("analytics:createAccountLogin:lookupSuccess",function(){a.sendEventData({clickAction:"RZLB:FindID:Success"})}),a.on("analytics:signin:success",function(){b.setCookie("analyticsCreateAccount",a.getData("pageName"),1,".bestbuy.com")})},initialize:function(a){return this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/creditCards",["sc-analytics-core/javascript/analyticsTracker"],function(a){var b=a.getData();return{setEvents:function(){a.on("citi:link:success",function(){a.sendEventData({linkName:b.pageName+": Citi: Click",lastLink:b.pageName+": Connect Account - Success"})}),a.on("citi:link:failure",function(){a.sendEventData({linkName:b.pageName+": Citi: Click",lastLink:b.pageName+": Connect Account - Failed"})}),a.when("analytics:signal:ready",function(){a.when("analytics:myBbyUpdate:lboxOpen",function(){a.sendEventData({clickAction:b.pageName+": CCLightBox"})})}),a.on("analytics:myBbyUpdate:success",function(){a.sendEventData({clickAction:b.pageName+": CCLightbox: Update Success"})})},initialize:function(a){return this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/deptCatLanding",["sc-analytics-core/javascript/analyticsTracker","analytics-dotcom/modules/addToCartHandler"],function(a,b){return{_buildPageName:function(a){return _.reject(_.pluck(a,"displayName"),function(a){return"Best Buy"===a}).join(": ")},setData:function(){window.siteControlBreadcrumb&&a.setData("pageName",this._buildPageName(window.siteControlBreadcrumb))},setEvents:function(){a.on("addToCart:done:success",new b)},initialize:function(a){return this.setData(),this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/fsdi",["sc-analytics-core/javascript/analyticsTracker"],function(a){return{_buildPageName:function(){var b=["uberCatName","parentCatName","catName"];return a.buildTrackingValue(b,": ")},setData:function(){a.setData("pageName",this._buildPageName())},setEvents:function(){$("#submitAuthenticatedForm")[0]&&$("#submitAuthenticatedForm")[0].addEventListener("click",function(){s.linkTrackVars="prop38",s.prop38="fsdi_seamlessApp: click: entry - customer_login_form_authenticated - Get Started",s.tl(this,"o","FSDI link tracking")}),$("#submitGuestUserForm")[0]&&$("#submitGuestUserForm")[0].addEventListener("click",function(){s.linkTrackVars="prop38",s.prop38="fsdi_seamlessApp: click: entry - customer_login_form - Get Started",s.tl(this,"o","FSDI link tracking")}),$("form.signInForm")[0]&&$("form.signInForm")[0].addEventListener("submit",function(){s.linkTrackVars="prop38",s.prop38="fsdi_seamlessApp: click: loginAttempt",s.tl(this,"o","FSDI link tracking")})},initialize:function(a){return this.setData(),this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/global",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/cookies","sc-analytics-core/javascript/util/queryParameters","sc-analytics-core/javascript/util/logger","analytics-dotcom/modules/utilities","analytics-dotcom/helpers/AddToCartImpressionCounter"],function(a,b,c,d,e,f){var g=e.ErrorHandler;return{_logger:d.getCustomInstance("module: global"),_trackCookie:b.getLegacyCookieObject(),_queryParams:c.getQueryParams(),_errorHandler:new g,_errorTrackers:{serverErrorTracker:function(a){return _.isArray(a)?void _.each(a,function(a){a&&a.errorCode?this._errorHandler.trackServerError(a.errorCode):this._logger.error("Event `pageEvent:error` expects `errorCode` to be a property on array items")}.bind(this)):void this._logger.error("Event `pageEvent:error` expects an array")},clientErrorTracker:function(a){return _.isArray(a)||_.isString(a)||_.isNumber(a)||!_.isObject(a)?void this._logger.error("Event `pageEvent:error:client` expects an object"):void _.each(a,function(a){return _.isArray(a)?void _.each(a,function(a){_.isString(a)?this._errorHandler.trackClientError(a):this._logger.error("Event `pageEvent:error:client` error message is empty or not a string")}.bind(this)):void this._logger.error("Event `pageEvent:error:client` expects each property to have an array as it's value")}.bind(this))}},_buildPageName:function(){var b=["uberCatName","parentCatName","catName"];return a.buildTrackingValue(b,": ")},_buildPageHierarchy:function(){var b=a.getData(),c=["uberCatName","parentCatName"];return b.catId&&"pdp"===b.catId?c.push("catId"):c.push("catName"),a.buildTrackingValue(c,",")},_buildCategoryId:function(){return a.buildTrackingValue(["uberCatId","parentCatId","catId"],": ")},_buildCategoryName:function(){var a=this._buildPageName();return a?a.split(":").filter(function(a,b){return 2>b}).join(":"):null},_buildCampaignId:function(){var b=c.getQueryParams();if(!b)return void this._logger.error("Expected queryParams to be an object");if(b.ref&&b.loc){var d=[];return d.push("ref","loc"),b.acampID&&d.push("acampID"),a.buildTrackingValue(d,",",b)}return b.cmp?b.cmp:b.dcmp?b.dcmp:window.track&&window.track.dcmp?track.dcmp:!1},_buildMonetateValue:function(){var a=window.MT_flag||b.getCookie("mt.s_monetateFlag");return a?"Monetate;"+a:null},_getCartItemCount:function(){var a,c=b.getCookie("CartItemCount"),d=0;return c&&c.length>0&&(a=parseInt(c,10),_.isNaN(a)?this._logger.error("`CartItemCount` cookie failed to parse to a number"):d=a),d},_bazaarVoiceCheck:function(){"undefined"!=typeof $BV&&$BV.ui("rr","show_reviews")},_buildReportedPageType:function(){var b=a.getData("pageType");return f.getCount()>0?b+=",addToCart":b},_setDataFunctions:{setViewSize:function(){b.getCookie("bby_rdp")&&a.setData("viewSize",b.getCookie("bby_rdp"))},setExactTargetIds:function(){var b=this._queryParams.et_cid,c=this._queryParams.et_rid;b&&a.setData("exTgtCampaign",b),c&&a.setData("exTgtRecipient",c)},setInternalCampaignId:function(){this._queryParams.icmp&&a.addEvents("event16")},setCampaignId:function(){var c=this._buildCampaignId();if(c){var d=new Date;b.setLegacyCookie("campaign_date",d.getTime()),b.setLegacyCookie("campaign",c),a.setData("campaignId",c)}},setRzTierCode:function(){var b=window.location;if(b.hostname.indexOf("www.bestbuy")>=0||b.hostname.indexOf("www-ssl.bestbuy")>=0){var c="https:"===b.protocol?"https://www-ssl.bestbuy.com/api/1.0/fragment/data/tierCode":"http://www.bestbuy.com/api/1.0/fragment/data/tierCode";$.ajax(c).done(function(b){var c;if("string"==typeof b)c=JSON.parse(b);else{if("object"!=typeof b)return!1;c=b}return c.rzTierStatus?(a.setData("rzTier",c.rzTierStatus),!0):void 0})}return!1},setClickAction:function(){var c=this._trackCookie.clickAction;c&&(a.setData("clickAction",c),b.setLegacyCookie("clickAction","","delete"))},setSearchRedirect:function(){var b=this._queryParams.searchRedirect;b&&(b=b.toString(),a.setData("searchTermSuccess","redirect: "+b.replace(/\+/g," ").toLowerCase()))},setUserToken:function(){var c=b.getCookie("ut");c&&a.setData("userToken",c)},setChangePassword:function(){b.getCookie("analyticsChangePassword")&&(b.removeCookie("analyticsChangePassword",!0),a.addEvents("event144"))},setThreeSkuBanner:function(){var c=b.getCookie("hl"),d=this._trackCookie.headerBanner;if(c){try{c=JSON.parse(decodeURIComponent(b.getCookie("hl")))}catch(e){return void this._logger.error("Failed to parse `hl` cookie value as JSON")}c.hlClickBeacon&&(a.addEvents("event26"),d?(a.setData("headerBannerClick",d),b.setLegacyCookie("headerBanner","","delete")):a.setData("headerBannerClick","HL_GHP_"+a.getData("skuId")))}},setTrackSignIn:function(){this._trackCookie.trackSignIn&&(a.addEvents("event9"),b.setLegacyCookie("trackSignIn","","delete"))},setCreateAccount:function(){b.getCookie("analyticsCreateAccount")&&(b.removeCookie("analyticsCreateAccount",!0),a.addEvents("event90"))},setSearchLocation:function(){var c=this._trackCookie.searchLocation;c&&(a.setData("searchLocation",c),b.setLegacyCookie("searchLocation","","delete"))},setAutoComplete:function(){var c=this._trackCookie.autocomplete;c&&(a.setData("searchAutocomplete",c),b.setLegacyCookie("autocomplete","","delete"))},setPartyId:function(){var b=this._queryParams.eut;b&&a.setData("partyID",b)}},_setData:function(){var d=(this._queryParams=c.getQueryParams(),this._trackCookie=b.getLegacyCookieObject(),a.getData());a.setData({scEvents:"",scEventsArray:[]}),Object.keys(this._setDataFunctions).map(function(a){var b=this._setDataFunctions[a];"function"==typeof b&&b.call(this)},this),a.setData({contextId:b.getCookie("context_id")||"",tealeafId:b.getCookie("SID")||"no_id",monetateValue:this._buildMonetateValue(),cartItemCount:this._getCartItemCount(),itemsInCart:this._getCartItemCount()+" item"+(this._getCartItemCount()>1?"s":"")+" in cart",categoryId:this._buildCategoryId(),categoryName:this._buildCategoryName(),hierarchy:this._buildPageHierarchy(),language:"es"===document.getElementsByTagName("html")[0].lang?"es":"en",pageName:this._buildPageName(),reportedPageType:this._buildReportedPageType(),section:d.uberCatName||d.parentCatName||d.catName||null})},setEvents:function(){a.on("pageEvent:error",this._errorTrackers.serverErrorTracker,this),a.on("pageEvent:error:client",this._errorTrackers.clientErrorTracker,this),a.on("analytics:signin:success",function(){b.setLegacyCookie("trackSignIn",!0)}),a.on("analytics:trackEvent:event",function(b){a.sendEventData(b)}),a.on("analytics:survey:accept",function(){a.sendEventData({confirmIt:b.getCookie("s_vi")})}),this._bazaarVoiceCheck(),a.on("Header:Search:Submit",function(a){if(b.setLegacyCookie("searchLocation",data.pageName),a&&a.autocomplete){var c=[a.autocomplete.selectedTerm];a.autocomplete.selectedCategory?c.push(a.autocomplete.selectedCategory):c.push("null"),c.push(a.autocomplete.partialTerm),b.setLegacyCookie("autocomplete",c.join(": "))}}),a.on("addToPackage",function(){a.sendEventData({templateName:data.templateName,clickAction:"mobilepkg:Add to Package",linkName:"mobilepkg:Add to Package"})}),a.on("PrimaryMessageCarousel:RightArrow",function(){a.sendEventData({lastLink:data.pageName+": PM Right Arrow"})}),a.on("PrimaryMessageCarousel:LeftArrow",function(){a.sendEventData({lastLink:data.pageName+": PM Left Arrow"})}),a.on("analytics:weddingEmailSignup:success",function(){a.triggerSignal("analytics:weddingEmailSignup:success")}),a.on("analytics:opinionLab:launch",function(){a.sendEventData({visitorId:b.getCookie("s_vi"),linkName:"OpinionLab: Feedback"})})},initialize:function(a){return this._setData(),this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/gsRenewals",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/queryParameters","analytics-dotcom/modules/utilities","sc-analytics-core/javascript/util/logger"],function(a,b,c,d){return{_getBundleList:function(a,b){return _.isArray(b)?b.map(function(b){var e=b.bundleId,f=c.parsePrice(b.price),g=_.get(b,"skus",[]).map(function(a){return c.parseInteger(a)}).join(":");return e||d.error("Missing bundle Id"),f||d.error("Missing bundle price"),g||d.error("Missing skus"),[a,e,f,g].join(":")}).join("|"):void d.error("_getBundleList must be pased an array")},_continueServiceHandler:function(b){if(!_.isArray(b))return void d.error("Event expects an array, but received something else");var c=this._getBundleList("purchase",b);a.setData("renewalsBundleList",c),a.triggerSignal("analytics:signal:stateChange")},_setEvents:function(){a.on("analytics:geekSquadRenewals:continueService",this._continueServiceHandler.bind(this))},_setData:function(){var c=b.getQueryParams().ContractId;c?a.setData("clickAction","GSCID:"+c):d.error("Missing ContractId in query params");var e=a.getData("renewalBundles");if(e){var f=this._getBundleList("view",e);f&&a.setData("renewalsBundleList",f)}},initialize:function(a){return this._setEvents(),this._setData(),a.resolve()}}}),define("analytics-dotcom/modules/homepage",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/cookies"],function(a,b){return{setData:function(){var c="Best Buy";a.setData({merchCategory:"Homepage",pageName:c,section:c,hierarchy:c,profileId:b.getCookie("DYN_USER_ID")})},fireSignalEvent:function(){a.triggerSignal("recommendations:load")},setEvents:function(){a.on("recommendations:load",function(b){"hooklogic"===b.type&&a.when("analytics:signal:ready",this.fireSignalEvent)},this)},initialize:function(a){return this.setData(),this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/icrLightbox",["sc-analytics-core/javascript/analyticsTracker"],function(a){var b=a.getData();return{setEvents:function(){var c="ICR:lbox:enterinfo",d="ICR:lbox:ourprice";a.on("icr:info:open",function(){var d={pageName:c,templateName:b.templateName};a.sendEventData(d)}),a.on("icr:info:close",function(){}),a.on("icr:info:continue",function(){var b={pageName:c,clickAction:"ICR:lbox:continue"};a.sendEventData(b)}),a.on("icr:price:open",function(){var c={pageName:d,templateName:b.templateName};a.sendEventData(c)}),a.on("icr:price:continue",function(){var b={pageName:d,clickAction:"ICR:lbox:continuecheckout"};a.sendEventData(b)}),a.on("icr:remove",function(b){a.sendEventData({pageName:"info"===b.state?c:"price"===b.state?d:"",scEvents:"scRemove",scProducts:a.getProductString({sku:b.skuId})})})},initialize:function(a){return this.setEvents(),a.resolve()}}}),define("analytics-dotcom/modules/lidTracking",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/cookies"],function(a,b){function c(a){var b=a.data("track")===!0?a.text():a.data("track"),c=a.parents("[data-context]");b=b.toString().replace(/\xA0/g," ");var d=[b];return _.each(c,function(a){d.push($(a).data("context"))}),{target:a,trackValue:b,contextString:d.reverse().join(": "),contexts:d.reverse()}}function d(a){var c=a.attr("name"),d="";_.isString(c)&&(d=c.toString().substring(5).replace(/\xA0/g," ")),b.setLegacyCookie("lid",$("<textarea />").html(d.replace(/<[^\>]*\>/g,"")).text()),b.setLegacyCookie("page",i.pageName)}function e(a){var c=a.data("lid");b.setLegacyCookie("lid",$("<textarea />").html(c.replace(/<[^\>]*\>/g,"")).text()),b.setLegacyCookie("page",i.pageName)}function f(){var a=b.getLegacyCookieObject();if(a.lid&&a.page){b.setLegacyCookie("lid",null,"delete"),b.setLegacyCookie("page",null,"delete");var c=a.lid,d=a.page;g(d,$("<textarea />").html(c.replace(/<[^\>]*\>/g,"")).text())}}function g(b,c){"hdr"===c.substring(0,3)||"ft"===c.substring(0,2)||"ubr"===c.substring(0,3)?a.setData("headerFooter",c):a.setData("previousLid",b+": "+c)}var h,i=a.getData(),j=function(a){return"BODY"===a.nodeName?"":a.dataset&&a.dataset.track?a.dataset.track:a.getAttribute&&a.getAttribute("data-track")?a.getAttribute("data-track"):a.parentNode?j(a.parentNode):!1},k=function(a){var b=j(a);b&&(a.dataset?a.dataset.track=b:a.setAttribute&&a.setAttribute("data-track",b))};return document.body.addEventListener?document.body.addEventListener("click",function(d){if(k(d.target),d.target.hasAttribute("data-track")){var e=$(d.target),f=c(e);b.setLegacyCookie("lid",$("<textarea />").html(f.contextString.replace(/<[^\>]*\>/g,"")).text()),b.setLegacyCookie("page",i.pageName),h=setTimeout(function(){if(lastPage=b.getLegacyCookieObject().page,lastPage){b.setLegacyCookie("lid",null,"delete"),b.setLegacyCookie("page",null,"delete");var c={lastLink:lastPage+": "+f.contextString};a.sendEventData(c)}},2e3)}},!0):$("body").on("click","[data-track]",function(d){var e=$(d.currentTarget),f=c(e);b.setLegacyCookie("lid",$("<textarea />").html(f.contextString.replace(/<[^\>]*\>/g,"")).text()),b.setLegacyCookie("page",i.pageName),h=setTimeout(function(){var c=b.getLegacyCookieObject().page;if(c){b.setLegacyCookie("lid",null,"delete"),b.setLegacyCookie("page",null,"delete");var d={lastLink:i.pageName+": "+f.contextString};a.sendEventData(d)}},2e3)}),$("body").on("click","a[name^='&lid=']",function(a){var b=$(a.currentTarget);d(b)}),$("body").on("click","a[data-lid]",function(a){var b=$(a.currentTarget);e(b)}),$(".banners iframe").load(function(){$(this).contents().find("body a[name^='&lid=']").on("click",function(a){var b=$(a.currentTarget);d(b)}),$(this).contents().find("body a[data-lid]").on("click",function(a){var b=$(a.currentTarget);e(b)}),$(this).contents().find("body [data-track]").on("click",function(d){var e=$(d.currentTarget),f=c(e);b.setLegacyCookie("lid",$("<textarea />").html(f.contextString.replace(/<[^\>]*\>/g,"")).text()),b.setLegacyCookie("page",i.pageName),h=setTimeout(function(){b.setLegacyCookie("lid",null,"delete"),b.setLegacyCookie("page",null,"delete");var c={lastLink:i.pageName+":"+f.contextString};a.sendEventData(c)},2e3)})}),$(window).on("beforeunload",function(){clearTimeout(h)}),{buildContext:"",initialize:function(a){return this.buildContext=c,f(),a.resolve()}}}),define("analytics-dotcom/modules/lifeEvents",["sc-analytics-core/javascript/analyticsTracker","analytics-dotcom/modules/addToCartHandler"],function(a,b){var c=a.getData();return{_createFromTheme:function(b){a.sendEventData({lastLink:c.pageName+": Top_Create_"+(b.listType?b.listType:"")})},_createYourOwn:function(){a.sendEventData({lastLink:c.pageName+": Top_Create_Create Your Own"})},_backToThemes:function(){a.sendEventData({lastLink:c.pageName+": Top_Back to themes"})},_createListPrimary:function(b){a.sendEventData({lastLink:c.pageName+": CreatePM_"+(b.listType?b.listType:"")})},_createListTile:function(b){a.sendEventData({lastLink:c.pageName+": CreateTile_"+(b.listType?b.listType:"")})},_searchLists:function(){a.sendEventData({lastLink:c.pageName+": Find a List"})},_addToList:function(b){var d={scProducts:";"+b.skuId+";;;event11=1;eVar48="+c.templateName+"-WL",scEvents:"event11"};a.sendEventData(d)},_addToRegistry:function(b){var d={scProducts:";"+b.skuId+";;;event11=1;eVar48="+c.templateName+"-WR",scEvents:"event11"};a.sendEventData(d)},_notificationsOpen:function(){var b={lastLink:c.pageName+": Notification_ViewAll"};a.sendEventData(b)},_notificationsExpand:function(b){var d={lastLink:c.pageName+": Notification_Expand_"+b.title};a.sendEventData(d)},_setAddToCartData:function(b){var d=a.buildProductString({sku:b&&b.product?b.product.skuId:"",events:{event5:b&&b.product?b.product.price:""},eVars:{eVar7:c.templateName,eVar40:a.getDate()}}),e={scEvents:"scAdd,event5"+(0===c.cartItemCount?",scOpen":""),scProducts:d};return e},_setEvents:function(){a.on("analytics:wishlist:createFromTheme",this._createFromTheme),a.on("analytics:wishlist:createYourOwn",this._createYourOwn),a.on("analytics:wishlist:backToThemes",this._backToThemes),a.on("analytics:wishlist:createListPrimary",this._createListPrimary),a.on("analytics:wishlist:createListTile",this._createListTile),a.on("lifeEvents:notifications:open",this._notificationsOpen),a.on("lifeEvents:notifications:expand",this._notificationsExpand),a.on("lifeEvents:searchLists",this._searchLists),a.on("addToList",this._addToList),a.on("addToRegistry",this._addToRegistry),a.on("addToCart:done:success",new b("",this._setAddToCartData))},_setListType:function(b){b&&(0===b.toLowerCase().indexOf("wedding")&&(listtype="wedding registry"),a.setData("listViewType",b.toLowerCase()))},setData:function(){c.isNew===!0&&c.catName.indexOf("Manage List")>-1&&a.addEvents("event42"),this._setListType(a.getData("listType"))},initialize:function(a){return this._setEvents(),this.setData(),a.resolve(this)}}}),define("analytics-dotcom/modules/login",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/cookies"],function(a,b){return{_changePasswordSuccess:function(c){return c&&c.willRedirect?void b.setCookie("analyticsChangePassword",a.getData("pageName"),.04,".bestbuy.com"):void a.sendEventData({scEvents:"event144"})},setEvents:function(){a.on("analytics:changePassword:success",this._changePasswordSuccess)},initialize:function(a){return this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/manageMobileDevices",["sc-analytics-core/javascript/analyticsTracker"],function(a){var b=a.getData();return{setEvents:function(){a.on("analytics:profile:mobileDevices:removeDevice",function(){a.sendEventData({pageName:b.pageName,linkName:b.pageName+": Remove from My Best Buy Mobile"})})},initialize:function(a){return this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/merchandising",["sc-analytics-core/javascript/analyticsTracker"],function(a){return{setData:function(){var b=a.getData("pageName");a.setData("merchPageName",b.replace(/: Faceted/i,""))},initialize:function(a){return this.setData(),a.resolve(this)}}}),define("analytics-dotcom/modules/payWithPoints",["sc-analytics-core/javascript/analyticsTracker"],function(a){a.getData();return{setEvents:function(){a.on("analytics:milestones:birthday:success",function(){a.sendEventData({pageName:"My Account: Milestone: Birthday: Success"})})},initialize:function(a){return this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/orderConfirmation",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/cookies","analytics-dotcom/modules/recommendations"],function(a,b,c){var d=a.getData();return{_buildPageName:function(){d.cleanedParentCatName=d.parentCatName?d.parentCatName.replace(/(registered)|(guest)/gi,""):null;var b=["uberCatName","cleanedParentCatName","catName"];return a.buildTrackingValue(b,": ")},_getCampaignLatency:function(){var a=b.getLegacyCookieObject(),c=a.campaign_date,d=new Date,e=d.getTime();return a.campaign_date>0?Math.ceil((e-c)/864e5):null},setData:function(){if(_mapFulfillmentString=function(a){switch(a){case"shipping":return"ship";case"inStorePickup":return"pickup";default:return a}},-1!==d.pageType.indexOf("thankYou")){a.setData("pageName",this._buildPageName()),a.setData("zip",d.orderZip),a.setData("state",d.orderState),a.setData("searchRelevancyTerm","Non-Search"),a.setData("searchRelevancyRank","Non-Search"),a.setData("rzTier",window.dioPageData.rzTier),a.setData("section","Checkout.ThankYou"),a.setData("purchaseId",window.dioPageData.orderId.split("-")[1]),window.dioPageData.scEventsArray.push("purchase"),a.setData("campaignLatency",this._getCampaignLatency()),b.setLegacyCookie("campaign_latency","","delete");var c=d.skuList.split(","),e=d.priceList.split(","),f=d.qtyList.split(","),g=d.orderShipAmt,h=d.ffTypeList.split(","),i="";_.each(h,function(a,b){""===a&&0!==b&&""!==h[b-1]&&(h[b]=h[b-1])}),track.ffTypeList=h.join(","),_.each(c,function(a,b){b>0&&(i+=","),i+=";"+a+";"+f[b]+";"+e[b]+";",g&&(i+="event4="+g),i+=";",h&&h[b]&&(i+="evar44="+_mapFulfillmentString(h[b])+";")}),d.isDonationEligible===!0?a.setData("reportedPageType",d.pageType+",stjudedonate"):d.isDonationEligible===!1&&a.setData("reportedPageType",d.pageType+",stjudelink"),a.setData("scProducts",i),track.pwpWasUsed===!0&&a.setData({checkoutPwpSuccess:"Checkout: PaywithPoints: Amex: Success",clickAction:"Checkout: PaywithPoints: Amex: Success"})}},setEvents:function(){a.on("recommendations:addTocart",function(b){var e=c.getShortEpValue(b.epValue)+": "+d.pageName;a.sendEventData({epClick:e,clickAction:e,scEvents:"scAdd,event5,event55",scProducts:a.getProductString({sku:b.skuId,events:{event5:b.price},eVars:{eVar7:e.replace(/,/g,"_")}})})}),a.on("analytics:stJudeDonation:submitsuccess",function(b){a.sendEventData({lastLink:"StJude:Confirmation:"+b.donationValue})}),a.on("analytics:stJudeDonation:submitError",function(){a.sendEventData({errorCodes:"StJude:Error"})})},initialize:function(a){return this.setData(),this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/packageTracker",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/queryParameters","sc-analytics-core/javascript/util/cookies"],function(a,b,c){var d=a.getData();return a.setData("isAccessoryFinderOpen",!1),{_buildPageName:function(){var b=["uberCatName","parentCatName","catId"];return a.buildTrackingValue(b,": ")},_buildSearchRank:function(){var a=c.getLegacyCookieObject();return a.searchRank?a.searchRank:""},_buildPageHierarchy:function(){var b=["uberCatName","parentCatName","catId"];return a.buildTrackingValue(b,",")},_buildMerchCategory:function(){var a="";return document.referrer?document.referrer.toLowerCase().indexOf("bestbuy.com")>-1&&(a=b.ref&&b.loc?"External Campaign":"Referrer"):a="Direct",a},_buildProductAvailability:function(){var b=!1,c="";if(d.isCloud){var e=$("#price .cart-button").data("button-state-id");switch(e){case"SOLD_OUT_ONLINE":b=!0,c="soldOutOnline";break;case"IN_STORE_ONLY":b=!0,c="inStoreOnly";break;case"COMING_SOON":b=!0,c="comingSoon"}}else $("#soldout").length>0?(b=!0,c="soldOutOnline"):$("#instoreonly").length>0?(b=!0,c="inStoreOnly"):$("#comingsoon").length>0&&(b=!0,c="comingSoon");return b&&a.addEvents("event13"),c},setData:function(){a.setData({pageName:this._buildPageName(),merchCategory:this._buildMerchCategory(),productAvailability:this._buildProductAvailability(),scProducts:d.skuId?a.getProductString({sku:d.skuId}):null,pageHierarchy:this._buildPageHierarchy(),searchRank:this._buildSearchRank()})},initialize:function(a){return this.setData(),a.resolve(this)}}}),define("analytics-dotcom/modules/payWithPointsCheckout",["sc-analytics-core/javascript/analyticsTracker","analytics-dotcom/modules/payWithPointsShared"],function(a,b){var c="Checkout";return{setEvents:function(){b.setEvents(c)},setData:function(){b.setData(c)},initialize:function(a){return this.setEvents(),this.setData(),a.resolve(this)}}}),define("analytics-dotcom/modules/payWithPointsProfile",["sc-analytics-core/javascript/analyticsTracker","analytics-dotcom/modules/payWithPointsShared"],function(a,b){var c="My Account";return{setEvents:function(){b.setEvents(c)},setData:function(){b.setData(c)},initialize:function(a){return this.setEvents(),this.setData(),a.resolve(this)}}}),define("analytics-dotcom/modules/payWithPointsShared",function(a){var b=a("sc-analytics-core/javascript/analyticsTracker"),c=b.getData(),d=!1;return{setEvents:function(a){b.on("analytics:paywithpoints:checkbalance:success",function(){b.sendEventData({clickAction:a+": Paywithpoints: Checkbalance: Amex: Success"}),b.triggerSignal("analytics:paywithpoints:checkbalance:success");
}),b.on("analytics:paywithpoints:checkbalance:fail",function(c){b.sendEventData({clickAction:a+": Paywithpoints: Checkbalance: Amex: Fail"})}),b.on("analytics:paywithpoints:stopuse",function(){b.sendEventData({clickAction:a+": Paywithpoints: Amex: Stop Use"})}),b.when("analytics:signal:ready",function(){b.when("analytics:paywithpoints",function(){var c=a+": PaywithPoints: Amex Check Balance";d||(b.sendEventData({payWithPoints:c}),d=!0)})})},setData:function(a){c.hasPwp&&c.hasPwp===!0&&d===!1&&(b.setData("payWithPoints",a+": PaywithPoints: Amex Check Balance"),d=!0)}}}),define("analytics-dotcom/modules/pdp",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/queryParameters","sc-analytics-core/javascript/util/cookies","sc-analytics-core/javascript/util/browserStorage","analytics-dotcom/modules/utilities","analytics-dotcom/modules/addToCartHandler"],function(a,b,c,d,e,f){var g=a.getData(),h=!1,i="",j="";return a.setData("isAccessoryFinderOpen",!1),{_buildPageName:function(){var b=["uberCatName","parentCatName","catId"];return a.buildTrackingValue(b,": ")},_buildSearchRank:function(){var a=c.getLegacyCookieObject();return a.searchRank?a.searchRank:""},_buildPageHierarchy:function(){var b=["uberCatName","parentCatName","catId"];return a.buildTrackingValue(b,",")},_buildMerchCategory:function(){var a="";return document.referrer?document.referrer.toLowerCase().indexOf("bestbuy.com")>-1&&(a=b.ref&&b.loc?"External Campaign":"Referrer"):a="Direct",a},_buildProductAvailability:function(){var b=!1,c="";if(g.isCloud){var d=$("#price .cart-button").data("button-state-id");switch(d){case"SOLD_OUT_ONLINE":b=!0,c="soldOutOnline";break;case"IN_STORE_ONLY":b=!0,c="inStoreOnly";break;case"COMING_SOON":b=!0,c="comingSoon"}}else $("#soldout").length>0?(b=!0,c="soldOutOnline"):$("#instoreonly").length>0?(b=!0,c="inStoreOnly"):$("#comingsoon").length>0&&(b=!0,c="comingSoon");return b&&a.addEvents("event13"),c},_checkPricingOptions:function(){a.getPricingType(g.pricingType);if(g.pricingType)switch(e.getPricingType(g.pricingType)){case"icr":a.addEvents("event95"),a.setData("isIcrSku",!0);break;case"map":a.addEvents("event94"),a.setData("isMapSku",!0)}},_buildVideoString:function(a){return a=a?a:"","SP^"+g.skuId+"^"+a+"^"+g.pageName},_setAddToCartData:function(b){var d;if(g.isAccessoryFinderOpen||h)return!1;var e=b.product,f="scAdd,event5"+(0===g.cartItemCount?",scOpen":""),j="",k="",l="",m="",n="",o=g.recommendationsData?g.recommendationsData.epValue:"",p=/\$?\d\d?\d?\d?\d?(\.\d\d)?/,q="",r="";if(m=i||o||null,n=g.recommendationsData?"d=c38":"",g.recommendationsData?f+=",event55":null,b&&b.requestOptions&&p.test(b.requestOptions.price)&&(j=b.requestOptions.price),b&&b.requestOptions)switch(b.requestOptions.addToCartClickLocation){case"postcard":k=g.templateName;break;case"buying-options-tab":g.skuId.toString()!==_.get(b,"requestOptions.skuId",g.skuId.toString()).toString()&&(l=g.skuId),k="BO:"+g.templateName;break;case"accessories-tab":case"recommended-accessories":l=g.skuId,k="ACC:"+g.templateName;break;default:l=g.skuId,k=g.templateName}b.isHaccs&&(f+=",event21"),q=i?"APC:"+k:k,q=g.recommendationsData?g.recommendationsData.epValueCleaned:q,r=i?"AC:cart add plan":null,r=g.recommendationsData?g.recommendationsData.epValue:null;var s={sku:e.skuId,price:j,eVars:{eVar7:q,eVar40:a.getDate(),eVar76:function(){var a="",c="",d=["undefined","null"];return b&&b.requestOptions&&(a=b.requestOptions.pricingType&&!_.contains(d,b.requestOptions.pricingType)?b.requestOptions.pricingType:"regularprice",c=b.requestOptions.condition&&!_.contains(d,b.requestOptions.condition)?b.requestOptions.condition:"new"),c+" - "+a}(),eVar77:function(){return b&&b.requestOptions&&b.requestOptions.productCondition?b.requestOptions.productCondition:void 0}()}};return l&&(s.eVars.eVar2=l),d={epClick:g.recommendationsData?"d=c38":null,clickAction:r,seePriceIn:g.isIcrSku?"See Price in Checkout":g.isMapSku?"See Price in Cart":null,scEvents:f,scProducts:a.buildProductString(s)},h=!1,c.setLegacyCookie("a2cTracked","true"),i="",a.setData("recommendationsData",""),d},_tabActivated:function(b){var c=b.clickLocation,d={};switch(j=b.tabId){case"reviews":_.extend(d,{scEvents:"event78",scProducts:a.getProductString({sku:g.skuId}),BVinteraction:"Bazaarvoice^RatingsAndReviews^Action^Read^Review^CustomClick"}),_.extend(d,{lastLink:g.pageName+": "+c});break;default:_.extend(d,{lastLink:g.pageName+": "+j})}a.when("analytics:signal:ready",function(){a.sendEventData(d)})},_qnaClicked:function(){a.sendEventData({BVinteraction:"Bazaarvoice^AskAndAnswer^Action^ProductQA^Popup^RRTab"})},_carfitExpand:function(){a.sendEventData({linkName:"Car Fit: Expand"})},_carfitSelectVehicle:function(){a.sendEventData({linkName:"Car Fit: Select Vehicle"})},_carfitChangeVehicle:function(){a.sendEventData({linkName:"Car Fit: Change Vehicle"})},_cartGeekSquadScenario:function(b){h=!0;var c={productTab:g.uberCatName+":"+g.parentCatName+":lbox",clickAction:"GS:cart add plan",seePriceIn:g.isIcrSku?"See Price in Checkout":g.isMapSku?"See Price in Cart":null,scEvents:"scAdd,event5"+(0===g.cartItemCount?",scOpen":""),scProducts:a.getProductString({sku:b,events:{event5:$("#priceblock-wrapper .item-price").text().replace(/\s/g,"")},eVars:{eVar7:"GS:"+g.templateName,eVar40:a.getDate()}})};a.sendEventData(c)},_appleCareAddToCart:function(a){i=a},_addToList:function(b){var c={scProducts:a.getProductString({sku:b.sku,events:{event11:"1"},eVars:{eVar48:g.templateName+"-WL"}}),scEvents:"event11"};a.sendEventData(c)},_addToRegistry:function(b){var c={scProducts:";"+b.sku+";;;event11=1;evar48="+g.templateName+"-WR",scEvents:"event11"};a.sendEventData(c)},_financingOffersTooltip:function(){var b={linkName:"fsdi: PDP_CC_Popup",lastLink:g.pageName+": CC_Offer: fsdi: click"};a.sendEventData(b)},_financingOffersNoTooltip:function(){var b={linkName:"fsdi: PDP_CC_Popup",lastLink:g.pageName+": CC_Offer: fsdi: click"};a.sendEventData(b)},_bundleTooltip:function(){c.setLegacyCookie("lid","pdp: tooltip bundle: pdp: click")},_packageIncludesThisItem:function(){c.setLegacyCookie("lid","Pkg Deals that Include this Item: pdp: click")},_qnaPopupLink:function(){var b={};_.extend(b,{BVinteraction:"Bazaarvoice^AskAndAnswer^Action^ProductQA^Popup"}),a.sendEventData(b)},_wishlistCreated:function(b){a.sendEventData({scEvents:"event42"})},_videoStart:function(b){a.sendEventData({scEvents:"event57",videoTrackingString:this._buildVideoString(b.videoTitle)})},_videoHalf:function(b){a.sendEventData({scEvents:"event98",videoTrackingString:this._buildVideoString(b.videoTitle)})},_videoEnd:function(b){a.sendEventData({scEvents:"event97",videoTrackingString:this._buildVideoString(b.videoTitle)})},_isBuildBundle:function(){return!!$("#build-bundle-link").length},_AccessoryFinderPDPClick:function(){var b=d.getValue("accessoryFinderClick",!0);b&&"lbox:PDPclick"===b&&(a.addEvents("event33"),a.setData({clickAction:b}))},_RecommendationClick:function(){var b=c.getCookie("dioEpClick");b&&(b=JSON.parse(b),a.setData({clickAction:b.epString,epClick:"D=c38"}),b.scEvents=b.scEvents||"",_.each(b.scEvents.split(","),function(b){a.addEvents(b)}),c.setCookie("dioEpClick","",-1,".bestbuy.com"))},_searchRelevancy:function(){d.getValue("searchTerm")&&d.getValue("searchRank")&&a.setData({searchRelevancyTerm:d.getValue("searchTerm"),searchRelevancyRank:d.getValue("searchRank")}),d.removeItem("searchTerm"),d.removeItem("searchRank")},_BVEntryClick:function(){d.getValue("ratingsClick")&&(a.addEvents("event78"),a.setData({BVload:d.getValue("ratingsClick")})),d.removeItem("ratingsClick")},_seePriceInCart:function(b){a.sendEventData({pageName:b.pageName,scProducts:a.buildProductString({sku:b.sku}),seePriceIn:"See Price in Cart",clickAction:"lbox:MAP:launch"})},_conditionPricingType:function(){var b="";return b+=g.pricingType?g.pricingType+" - ":"regularprice - ",b+=g.condition?g.condition:"new",b&&a.addEvents("event101"),b},_setData:function(){a.addEvents("event3","prodView"),this._AccessoryFinderPDPClick(),this._RecommendationClick(),this._searchRelevancy(),this._BVEntryClick(),this._checkPricingOptions(),this._isBuildBundle()?a.addEvents("event93"):null,a.setData({pageName:this._buildPageName(),merchCategory:this._buildMerchCategory(),productAvailability:this._buildProductAvailability(),scProducts:g.skuId?a.getProductString({sku:g.skuId,eVars:{eVar76:this._conditionPricingType()}}):null,pageHierarchy:this._buildPageHierarchy(),searchRank:this._buildSearchRank()})},_setEvents:function(){var b=this;a.on("addToCart:done:success",new f("",this._setAddToCartData)),a.on("pdp:tab:activated",b._tabActivated),a.on("pdp:qna:clicked",b._qnaClicked),a.on("pdp:carfit:expand",b._carfitExpand),a.on("pdp:carfit:select-vehicle",b._carfitSelectVehicle),a.on("pdp:carfit:change-vehicle",b._carfitChangeVehicle),a.on("cart.geeksquad.scenario",b._cartGeekSquadScenario),a.on("analytics:pdp:appleCare:addToCart",b._appleCareAddToCart),a.on("addToList",b._addToList),a.on("addToRegistry",b._addToRegistry),a.on("analytics:wishlist-created",b._wishlistCreated),a.on("MediaElement:videoStart",b._videoStart.bind(this)),a.on("MediaElement:videoHalf",b._videoHalf.bind(this)),a.on("MediaElement:videoEnd",b._videoEnd.bind(this)),a.on("analytics:pdp:seePriceInCart",b._seePriceInCart),$("body").on("click","#all-financing-offers-tooltip > div > ul > li > a",b._financingOffersTooltip),$("#financing-offers").on("click","a",b._financingOffersNoTooltip),$("body").on("click","#all-bundles-tooltip a",b._bundleTooltip),$("#bundle-products > div > div > a").on("click",b._packageIncludesThisItem),$("[data-bbypopup-name='askAnswer']").on("click",b._qnaPopupLink)},initialize:function(a){return this._setData(),this._setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/productListing",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/cookies","sc-analytics-core/javascript/util/browserStorage","sc-persistence-manager/javascript/persistence-manager"],function(a,b,c,d){var e=a.getData();return{_searchRankString:function(a){return a?e.listPageNum.toString()+": "+a.toString()+": "+e.listFaceted.toString()+": "+e.listSort+": "+e.listView:null},_facetDataManager:function(c,f,g){var h={};_.each(c,function(a){var b=a.split(":")[0],c=a.split(":")[1];h[b]?h[b].push(c):h[b]=new Array(c)});var i={};_.each(f,function(a,b){var c=a.split(":")[0];""!==c&&(i[c]?i[c].push(a.split(":")[1]):i[c]=new Array(a.split(":")[1]))});var j={};return d.get("analytics:facetCache").then(function(a){j=a?JSON.parse(a):{},_.each(j,function(a,b){var c=_.intersection(a,i[b]);0===c.length?delete j[b]:j[b]=c});var b=e.facetRange||e.facetSearch||void 0;b&&(j[b]?j[b]=_.union(j[b],h[b]):j[b]=h[b]),d.set("analytics:facetCache",JSON.stringify(j))})["finally"](function(){_.each(i,function(a,b){_.each(a,function(a){j&&_.contains(j[b],a)?g.push(("Price"===b?"":"User"+b+":")+a):g.push(b+":"+a)})}),g=_.map(g,function(a){if(0===a.indexOf("UserPrice")){var b=a.split(":")[1].split(" to ");return b=_.map(b,function(a){return"$"+a}),a.split(":")[0]+":"+b.join(" to ")}return a}),listFacetsString=g.join(" | "),a.setData("listFacetsString",listFacetsString),e.pageName&&a.setData("listFacetsString","Category:"+e.pageName+(e.listFacetsString?" | "+e.listFacetsString:""));var d=c.length?_.last(c):void 0,f=d&&d.split(":");d=f&&f.length&&_.contains(i[f[0]],f[1])?d:"",d=d&&0===d.indexOf(e.facetSearch)?"User"+d:d,d&&0===d.indexOf("UserPrice")&&(d="UserPrice:"+_.map(d.split(":")[1].split(" to "),function(a){return"$"+a}).join(" to "),a.setData("previousLid",e.pageName+": "+d.split(":")[1])),a.setData("lastFacetSelected",d),b.setLegacyCookie("listFacets",e.listFacets)})["catch"](function(a){})},_doWaterFilterFinderLogic:function(){var b=c.getValue("waterFilterFinderTerm",!0);b&&a.setData("userSearchTermSuccess",b);var d=c.getValue("waterFilterFinderBrand",!0);d&&(a.setData("previousLid",a.getData("pageName")+": waterfilterfinder"),a.setData("listFacetsString","Brand: "+d))},_doInkTonerFinderLogic:function(){var b=c.getValue("inkTonerFinderTerm",!0),d=c.getValue("inkTonerFinderBrand",!0);b&&a.setData({clickAction:"ink_model_search",userSearchTermSuccess:b}),d&&a.setData("clickAction","ink_brand_search")},setData:function(){if(e.searchTerm&&e.searchTerm.length){var c=b.getLegacyCookieObject().lastSearchTerm;c&&e.searchTerm!==c&&b.setLegacyCookie("listFacets",""),b.setLegacyCookie("lastSearchTerm",e.searchTerm)}var d=[],f=b.getLegacyCookieObject().listFacets||"",g=e.listFacets.split("||");f=f.split("||"),f=f[0].length>0?f:[];var h=f.length>0&&g.length>0?_.xor(f,g):g;return e.storeAvailability===!0&&a.addEvents("event88"),this._facetDataManager(h,g,d).bind(this)["finally"](function(){this._doInkTonerFinderLogic(),this._doWaterFilterFinderLogic()})},setEvents:function(){var d=this;a.on("analytics:listing:seePriceInCart",function(){a.sendEventData({pageName:e.pageName,scProducts:a.buildProductString({sku:e.sku}),seePriceIn:"See Price in Cart",clickAction:"lbox:MAP:launch"})}),a.on("analytics:inkTonerFinder:searchSelect",function(a){c.saveValue("inkTonerFinderTerm",a.value?a.value.split(",").join(" "):a.value,"session")}),a.on("analytics:inkTonerFinder:brandSelect",function(){c.saveValue("inkTonerFinderBrand","null","session")}),a.on("analytics:waterFilterFinder:searchSelect",function(a){c.saveValue("waterFilterFinderTerm",a.value?a.value.split(",").join(" "):a.value,"session")}),a.on("analytics:waterFilterFinder:brandSelect",function(a){c.saveValue("waterFilterFinderBrand",a.brand.split(",")[0],"session")}),a.on("analytics:storeAvailability:checked",function(){a.sendEventData({clickAction:"PLP:LocalStore",scEvents:"event88"})}),a.on("analytics:storeAvailability:lbox:selectPreferredStore",function(){a.sendEventData({clickAction:"PLP:LocalStore:Select-Preferred"})}),a.on("analytics:storeAvailability:lbox:selectStore",function(){a.sendEventData({clickAction:"PLP:LocalStore:Select"})}),a.on("addToCart:done:success",function(c){if(c.isRemove!==!0){if(!a.getData("isAccessoryFinderOpen")){var f=a.getPricingType(c.requestOptions.pricingType),g=c.requestOptions.price?c.requestOptions.price:"",h=["scAdd,event5"];0===e.cartItemCount&&h.push("scOpen"),"map"===f&&h.push("event99"),"icr"===f&&h.push("event100"),c.isHaccs&&h.push("event21"),a.sendEventData({templateName:e.templateName,scEvents:h.join(","),scProducts:a.getProductString({sku:c.product.skuId,events:{event5:g},eVars:{eVar7:e.templateName,eVar40:a.getDate(),eVar76:("clearance"===f?"clearance":!1)||("open-box"===f?"open-box":!1)||("refurbished"===f?"refurbished":!1)||void 0}}),seePriceIn:"icr"===f?"See Price in Checkout":"map"===f?"See Price in Cart":null,searchRelevancyRank:function(){return e.pageType.indexOf("search")>=0&&c&&c.requestOptions&&c.requestOptions.cartButtonRank?d._searchRankString(c.requestOptions.cartButtonRank):e.pageType.indexOf("search")>=0?"":"Non-Search"}(),searchRelevancyTerm:e.pageType.indexOf("search")>=0?e.searchTerm:"Non-Search"}),a.setData("cartItemCount",++e.cartItemCount)}b.setLegacyCookie("a2cTracked","true")}})},initialize:function(a){return this.setEvents(),this.setData().bind(this).then(function(){a.resolve(this)}),a}}}),define("analytics-dotcom/modules/profile",["sc-analytics-core/javascript/analyticsTracker"],function(a){return{setEvents:function(){a.on("analytics:studentVerification:success",function(){a.triggerSignal("analytics:studentVerification:success")})},initialize:function(a){return this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/promo",["sc-analytics-core/javascript/analyticsTracker"],function(a){var b=a.getData();return{_setEvents:function(){a.on("addToCart:done:success",function(c){if(!a.getData("isAccessoryFinderOpen")){var d=a.getPricingType(c.requestOptions.pricingType),e=c.requestOptions.price?c.requestOptions.price:"",f=["scAdd"];0===b.cartItemCount&&f.push("scOpen"),"map"===d&&f.push("event99"),"icr"===d&&f.push("event100"),c.isHaccs&&f.push("event21"),a.sendEventData({scEvents:f.join(","),scProducts:a.getProductString({sku:c.product.skuId,events:{event5:e},eVars:{eVar7:b.templateName,eVar40:a.getDate()}}),seePriceIn:"icr"===d?"See Price in Checkout":"map"===d?"See Price in Cart":null}),a.setData("cartItemCount",++b.cartItemCount)}})},_setData:function(){var b=a.getData("breadcrumb")||window.siteControlBreadcrumb;b&&b[2]&&"Deal of the Day"===b[2].displayName&&a.setData("dealOfDay","DotD")},initialize:function(a){return this._setEvents(),this._setData(),a.resolve(this)}}}),define("analytics-dotcom/modules/recommendations",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/cookies","sc-analytics-core/javascript/util/queryParameters","analytics-dotcom/modules/utilities"],function(a,b,c,d){return{_epSplit:function(a){var b={},c=a.split(",");for(var d in c){var e=c[d].split("-");b[e[0]]=e[1],e.length>2&&e.map(function(a,c){c>1&&(b[e[0]]+="-"+a)})}return b},getShortEpValue:function(a){var b=this._epSplit(a),c="rc-"+b.rc+",av-"+b.av+",rk-"+b.rk;return b.ds&&(c+=",ds-"+b.ds),c},_productClick:function(c){b.setCookie("dioEpClick",JSON.stringify({scEvents:"event55",epString:this.getShortEpValue(c.epValue)+": "+a.getData("pageName")}),.021,".bestbuy.com")},_addToCart:function(b){var c=this.getShortEpValue(b.epValue);a.setData("recommendationsData",{epValue:c+": "+a.getData("pageName"),epValueCleaned:c.replace(/,/g,"_")+": "+a.getData("pageName").replace(/,/g,"")})},_itemInteraction:function(b){a.sendEventData({clickAction:this.getShortEpValue(b.epValue)+": "+a.getData("pageName"),epClick:"d=c38",events:"event55",scProducts:d.getProductString({sku:b.sku})})},setEvents:function(){a.on("recommendations:productClick",this._productClick.bind(this)),a.on("recommendations:addTocart",this._addToCart.bind(this)),a.on("recommendations:itemInteraction",this._itemInteraction.bind(this))},setData:function(){var b=c.getQueryParams();b.ep&&a.setData("epClick",b.ep+(b.ref?",ref="+b.ref:""))},initialize:function(a){return this.setEvents(),this.setData(),a.resolve(this)}}}),define("analytics-dotcom/modules/repairScheduling",["sc-analytics-core/javascript/analyticsTracker"],function(a){return{setEvents:function(){a.on("analytics:scheduling:month:change",function(){a.sendEventData({clickAction:"GS Repair Schedule: ChangeDate"})})},initialize:function(a){return this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/search",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/cookies"],function(a,b){var c=a.getData();return{setData:function(){if(a.setData("templateName","SRCL"+(c.listFaceted?"F":"")),!c.headerBanner){var b=$(".sku-banner").data("bannerSkuList"),d=$(".sku-banner").data("bannerPlatform");b&&d&&(c.headerBanner={platform:d,skus:b.toString().split(",")})}_.isObject(c.headerBanner)&&c.headerBanner.platform&&_.isArray(c.headerBanner.skus)&&a.setData("headerBannerString",c.headerBanner.platform+"_"+c.searchTerm.toString().toLowerCase()+"_"+c.headerBanner.skus.join("_"))},setEvents:function(){a.on("analytics:plp:bannerClick",function(a){c.headerBanner&&c.headerBanner.platform&&c.searchTerm&&b.setLegacyCookie("headerBanner",c.headerBanner.platform+"_"+c.searchTerm+"_"+a.skuId)})},initialize:function(a){return this.setData(),this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/searchResults",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/cookies","sc-analytics-core/javascript/util/browserStorage"],function(a,b,c){var d=a.getData();return{_searchRankString:function(a){return a?d.listPageNum.toString()+": "+a.toString()+": "+d.listFaceted.toString()+": "+d.listSort+": "+d.listView:null},setData:function(){d.categoryId?a.setData("categoryId","pcat17071: "+d.categoryId):a.setData("categoryId","pcat17071"),a.setData({pageName:"Search Results"+(d.listFaceted?": Faceted":""),merchCategory:"Search Results",searchTermSuccess:d.searchTerm.toString().toLowerCase(),searchRelevancyTerm:d.searchTerm.toString().toLowerCase()}),a.setData("searchResultsNum",a.parseInteger(d.searchResultsNum));var b=c.getValue("lastSearchTerm",!0);if(!d.listFaceted){var e=Number(c.getValue("searchCount")||"0")+1;a.setData("scProducts",a.getProductString({sku:"internalsearch"+e})),c.saveValue("searchCount",e,"session")}("undefined"==typeof b||b!==d.searchTerm)&&a.addEvents("event1"),c.saveValue("lastSearchTerm",d.searchTerm,"session")},setEvents:function(){var e=this;$("body").on("click","[data-rank='pdp']",function(a){var b=parseInt($(a.target).parents(".list-item").index(),10)+1;c.saveValue("searchRank",e._searchRankString(b),"session"),c.saveValue("searchTerm",d.searchTerm,"session")}),$("body").on("click","[data-rank='availability']",function(b){var c=parseInt($(b.target).parents(".list-item").index(),10)+1;a.sendEventData({searchRelevancyRank:e._searchRankString(c),searchRelevancyTerm:d.searchTerm})}),$("body").on("click","[data-rank='reviews']",function(a){var f=parseInt($(a.target).parents(".list-item").index(),10)+1;c.saveValue("searchRank",e._searchRankString(f),"session"),c.saveValue("searchTerm",d.searchTerm,"session"),c.saveValue("ratingsClick","Bazaarvoice^RatingsAndReviews^Action^Read^Review^SearchResults","session"),b.setLegacyCookie("lid",d.pageName+": list: reviews")})},initialize:function(a){return this.setData(),this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/searchResultsFailed",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/browserStorage"],function(a,b){var c=a.getData();return{setData:function(){var d=b.getValue("waterFilterFinderTerm",!0);if(d&&a.setData("userSearchTermFailure",d),a.setData({pageName:"Search Results: No Results",searchResultsNum:"zero",searchTermFailure:c.searchTerm,searchRelevancyTerm:"Non-Search"}),!c.listFaceted){var e=Number(b.getValue("searchCount")||"0")+1;a.setData("scProducts",a.getProductString({sku:"internalsearch"+e})),b.saveValue("searchCount",e,"session")}var f=b.getValue("lastSearchTerm",!0);("undefined"==typeof f||f!==c.searchTerm)&&a.addEvents("event2"),b.saveValue("lastSearchTerm",c.searchTerm,"session")},setEvents:function(){},initialize:function(a){return this.setData(),this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/searchResultsPromo",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/browserStorage","sc-analytics-core/javascript/util/cookies"],function(a,b,c){var d=a.getData();return{setData:function(){a.setData({pageName:"Search: Promo"+(d.listFaceted?": Faceted":"")+": "+d.searchTerm,searchTermPromo:d.searchTerm}),a.setData("searchResultsNum",a.parseInteger(d.searchResultsNum))},setEvents:function(){$("body").on("click","[data-rank='pdp']",function(){b.saveValue("searchRank","Non-Search"),b.saveValue("searchTerm","Non-Search")}),$("body").on("click","[data-rank='reviews']",function(){b.saveValue("searchRank","Non-Search"),b.saveValue("searchTerm","Non-Search"),b.saveValue("ratingsClick","Bazaarvoice^RatingsAndReviews^Action^Read^Review^BrowseResults","session"),c.setLegacyCookie("lid",d.pageName+": list: reviews")})},initialize:function(a){return this.setData(),this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/selfService",["sc-analytics-core/javascript/analyticsTracker"],function(a){return{setData:function(){a.trigger("page:ready")},initialize:function(a){return this.setData(),a.resolve(this)}}}),define("analytics-dotcom/modules/shippingOptions",["sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/queryParameters"],function(a,b){var c=a.getData(),d=b.getQueryParams();return{_buildLosArray:function(){return _.pluck(c.losParams,"losId").join(":")},setData:function(){a.setData({pageName:"Fulfillment Options Lbox",scProducts:a.getProductString({sku:d.skuId,eVars:{eVar45:this._buildLosArray()}})})},initialize:function(a){return this.setData(),a.resolve(this)}}}),define("analytics-dotcom/modules/solutionBuilder",function(){return{initialize:function(a){return a.resolve(this)}}}),define("analytics-dotcom/modules/stateChange",["require","sc-analytics-core/javascript/analyticsTracker","analytics-dotcom/siteConfig"],function(a,b,c){return data=b.getData(),{setEvents:function(){b.on("page:stateChange",function(){$.extend(data,window.track),_.each(c.getLoadModules(),function(b){var c=a(b);c&&c.setData?c.setData():c&&c._setData&&c._setData()}),b.setData("scEventsArray",_.unique(b.getData("scEventsArray"))),b.setData("scEvents",b.getData("scEventsArray").join(",")),b.sendStateData()})},initialize:function(a){return this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/storeAvailability",["sc-analytics-core/javascript/analyticsTracker"],function(a){return{setEvents:function(){a.on("storeAvailability:open",function(){a.sendEventData({clickAction:"StoreFinder:Launch"})}),a.on("storeAvailability:changeLocation",function(){a.sendEventData({clickAction:"StoreFinder:ChangeLocation"})}),a.on("storeAvailability:inStock",function(){a.sendEventData({clickAction:"StoreFinder:ShowStores"})}),a.on("storeAvailability:selectStore",function(){a.sendEventData({clickAction:"StoreFinder:SelectThisStore"})})},initialize:function(a){return this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/trackEvent",["sc-analytics-core/javascript/analyticsTracker"],function(a){var b=a.getData();return{trackEvent:{_announce:function(b){a.trigger("analytics:trackEvent:event",b)},event:function(b,c){a.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({clickAction:c.clickAction||null,scEvents:c.conversion||null,scProducts:c.d_product||null,pageName:c.page||null,section:c.d_uberCat||null,templateName:c.templateName||null,linkName:c.lid||null,errorCodes:c.errorCodeList||null,ccApplication:c.ccApplication||null,lastLink:c.lastLink||null,seePriceIn:c.seePriceIn||null,pageCampaign:c.pageCampaign||null,abTest66:c.abTest66||null,abTest67:c.abTest67||null,abTest68:c.abTest68||null,legacyCodebase:"te.event"})},map:{},_SaveCookie:function(){a.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events.")},api:{trackClick:function(b,c){a.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({linkName:this._createLid(b,c),legacyCodebase:"te.trackClick"})},trackCustomLink:function(b,c,d,e){a.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({linkName:this._createLid(b,e),lastLink:this._createLink(c,d,e),legacyCodebase:"te.trackCustomLink"})},trackTabClick:function(b,c,d){a.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({lastLink:this._createLink(b,c,d),legacyCodebase:"te.trackTabClick"})},trackErrorCodes:function(b,c,d,e){a.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({page:this._createPageName(e),lastLink:this._createLink(c,d),errorCodes:b,legacyCodebase:"te.trackErrorCodes"})},trackNewWindow:function(b,c,d,e){a.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({pageName:d,clickAction:this._createAction(b,c,e),legacyCodebase:"te.trackNewWindow"})},trackLightboxLaunch:function(c,d,e){a.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({pageName:this._createLightboxName(d,e),section:b.uberCatName||b.parentCatName||b.catName,clickAction:this._createAction("","launch",e),templateName:e+": "+d,legacyCodebase:"te.trackLightboxLaunch"})},trackLightboxClick:function(b,c,d,e){a.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({pageName:this._createLightboxName(c,e),lastLink:this._createLink(c+": "+b,d,e),clickAction:this._createAction(c+": "+b,d,e),legacyCodebase:"te.trackLightboxClick"})},trackAddToCartClick:function(b,c){a.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({linkName:this._createLid(b,c),lastLink:this._createLink(b,"click",c),legacyCodebase:"te.trackAddToCartClick"})},trackPageCampaign:function(b,c,d,e){a.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({lastLink:this._createLink(b,d,e),campaignId:c,legacyCodebase:"te.trackPageCampaign"})},EPsplit:function(){a.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events.")},trackEPView:function(){a.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events.")},trackEPClick:function(){a.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events.")},trackABTestView:function(){a.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events.")},trackABTestClick:function(){a.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events.")},_createLid:function(a,b){return("string"==typeof b&&b.length>0?b+": ":"")+a},_createLink:function(a,b,c){return a+("string"==typeof c&&c.length>0?": "+c:"")+("string"==typeof b&&b.length>0?": "+b:"")},_createPageName:function(a){var c="";return c=b.pageName.length>0?b.pageName:(b.uberCatName?b.uberCatName+": ":"")+(b.parentCatName?b.parentCatName+": ":"")+("pdp"===b.catId?b.catId:b.catName?b.catName:""),c+("string"==typeof a&&a.length>0?": "+a:"")},_createAction:function(a,b,c){return("string"==typeof c&&c.length>0?c+": ":"")+a+("string"==typeof b&&b.length>0?": "+b:"")},_createLightboxName:function(a,c){var d="";return d="string"==typeof a&&a.length>0?a:b.pageName?b.pageName:(b.uberCatName?b.uberCatName+": ":"")+(b.parentCatName?b.parentCatName+": ":"")+("pdp"===b.catId)?b.catId:b.catName?b.catName:"",d+("string"==typeof c&&c.length>0?": "+c:"")}}},initialize:function(a){return this.trackEvent.api._announce=this.trackEvent._announce,window.trackEvent=this.trackEvent,a.resolve()}}}),define("analytics-dotcom/modules/upgradeChecker",["sc-analytics-core/javascript/analyticsTracker"],function(a){var b=a.getData();return{_isApple:function(b){var c=this,d=b?b:a.getData()||{},e=_.filter(d,function(a){return _.isObject(a)?c._isApple(a):_.isString(a)&&/(apple)/gi.test(a)?!0:!1});return e.length?!0:!1},_upgradeCheckerSubmit:function(){a.sendEventData({pageName:"mobilepkg:submiteligibility",scEvents:"event110",linkName:"mobilepkg:submiteligibility"})},_buildPageName:function(b){var c=this,d=a.buildTrackingValue(["uberCatName","parentCatName"],": ");return d+=c._isApple()&&b.contentName&&/(geek)/gi.test(b.contentName)?": Add AppleCare and accessories":"undefined"!=typeof b.contentName&&b.contentName?": "+b.contentName.charAt(0).toUpperCase()+b.contentName.substring(1).replace(/\-/g," "):": Connect to account"},_buildEligibilityString:function(a){var b=[];switch(a.upgradeStatus){case"ELIGIBLE":b.push("2YE");break;case"INELIGIBLE":b.push("2YI");break;case"EARLY_ELIGIBLE":b.push("2YEE");break;case"ALTERNATE_ELIGIBLE":b.push("2YAE")}switch(a.ibEligibleStatus){case"ELIGIBLE":b.push("IBE");break;case"INELIGIBLE":b.push("IBI");break;case"IN_STORE_ELIGIBLE":b.push("IBISO")}return!a.isPhoneIBCompatible&&a.activatedItem&&b.push("IBIP"),b.length?b.join(" "):null},setData:function(){var c=this._buildPageName(b.activatedPackage),d=-1!==c.indexOf("Review upgrade status")?this._buildEligibilityString(b.activatedPackage):"",e=a.getData("activatedPackage"),f=e&&e.upgradeStatus&&"Cell Phones: Upgrade: Connect to account"!=c?e.upgradeStatus:"";
a.setData({pageName:c,upgradeEligibility:d,scProducts:a.getProductString({sku:a.getData("skuId"),eVars:{eVar32:"InflowUpgrade:"+a.getData("carrier")+(f?":"+f:"")}})})},setEvents:function(){var c=this;a.on("upgradeChecker:submit",function(){c._upgradeCheckerSubmit()}),a.on("upgradeChecker:billing",function(b){a.sendEventData({clickAction:"mobilepkg: installmentbilling: "+b.buyingOptKey,linkName:"mobilepkg: installmentbilling: "+b.buyingOptKey})}),a.on("upgradeChecker:quickLook:open",function(b){a.sendEventData({scEvents:"event27",scProducts:a.getProductString({sku:b.skuId}),clickAction:"mobilepkg: AccessoryPage: QuickLook",linkName:"mobilepkg: AccessoryPage: QuickLook"})}),a.on("upgradeChecker:addToPackage",function(b){var c="row"===b.location?"AddToPackageRow":"quickLook"===b.location?"AddToPackageQuickLook":null;c&&a.sendEventData({clickAction:"mobilepkg: AccessoryPage: "+c,linkName:"mobilepkg: AccessoryPage: "+c})}),a.on("upgradeChecker:accessoryShowMore",function(b){a.sendEventData({clickAction:"mobilepkg: AccessoryPage: ShowMore:"+b.category,linkName:"mobilepkg: AccessoryPage: ShowMore: "+b.category})}),a.on("analytics:radioButtonClick:protection",function(c){c&&a.setData("protectionType",c.warrantyType?c.warrantyType:""),b.protectionType.toUpperCase().indexOf("APPLECARE")>-1?a.sendEventData({pageName:"Cell Phones: Upgrade: Add AppleCare and accessories",clickAction:"mobilepkg: AccessoryPage: AppleCareRadio",linkName:"mobilepkg: AccessoryPage: AppleCareRadio"}):a.sendEventData({clickAction:"mobilepkg: AccessoryPage: GeekSquadRadio",linkName:"mobilepkg: AccessoryPage: GeekSquadRadio"})}),a.on("upgradeChecker:addToCart",function(c){a.sendEventData({pageName:b.protectionType?"Cell Phones: Upgrade: Add AppleCare and accessories":b.pageName,scEvents:"scAdd",scProducts:a.getProductString(_.map(c.products,function(b){var d={sku:b.skuId,events:{event5:b.price},eVars:{eVar7:window.track.templateName+":AccessoryPage:"+c.location,eVar40:a.getDate()}};return c.parent.skuId.toString()!==b.skuId.toString()&&(d.eVars.eVar2=c.parent.skuId),d}))})}),a.on("upgradeChecker:differentNumber",function(){a.sendEventData({lastLink:"Check a different number"})})},initialize:function(a){return this.setData(),this.setEvents(),a.resolve(this)}}}),define("analytics-dotcom/modules/utilities",["sc-analytics-core/javascript/analyticsTracker"],function(a){var b={cleanProductValue:function(a){return $("<textarea />").html(a.toString().replace(/<[^\>]*\>/g,"")).text().replace(/[\;\$\,\=\|]/g,"")},parsePrice:function(a){if(a){var b=Number(a.toString().replace(/[^0-9\.]/g,"")).toFixed(2).toString();return"NaN"===b?"":b}return""},parseInteger:function(a){if(a){var b=Number(a.toString().replace(/[^0-9\.]/g,"")).toFixed(0).toString();return"NaN"===b?"":b}return""},getProductString:function(a){var c=["category","sku","quantity","price","eventString","eVarString"];return _.isArray(a)||(a=[a]),_.compact(_.map(a,function(a){return _.isObject(a)&&a.sku?(a.sku=b.cleanProductValue(a.sku),a.quantity=b.parseInteger(a.quantity),a.price=b.parsePrice(a.price),_.isObject(a.events)&&(a.eventString=_.map(a.events,function(a,c){return a?c+"="+b.cleanProductValue(a):void 0}).join("|")),_.isObject(a.eVars)&&(a.eVarString=_.chain(a.eVars).map(function(a,c){return a?c+"="+b.cleanProductValue(a):void 0}).compact().value().join("|")),_.map(c,function(b){return a[b]?a[b]:""}).join(";")):void 0},this),this).join(",")},getPricingType:function(a){if(a)switch(a.toLowerCase()){case"icr-noprice":case"icr-strikethrough":case"icr-hideprice":return"icr";case"map":case"map-nosale":return"map";case"clearance":return"clearance";case"onsale":return"onsale";default:return"regularprice"}},getCondition:function(a){if(a)switch(a.toLowerCase()){case"refurbished":return"refurbished";case"open-box":return"open-box";case"pre-owned":return"pre-owned"}},getDate:function(){var a=new Date,b=(a.getMonth()+1).toString(),c=a.getDate().toString();return(1===b.length?"0":"")+b+"-"+(1===c.length?"0":"")+c+"-"+a.getFullYear().toString()},initialize:function(a){return a.resolve()},buildProductString:function(c){var d=["category","sku","quantity","price","eventString","eVarString"];return _.isArray(c)||(c=[c]),_.compact(_.map(c,function(c){return _.isObject(c)&&(c.sku||c.skuId)?(c.sku=b.cleanProductValue(c.sku||c.skuId),c.quantity=b.parseInteger(c.quantity),c.price=b.parsePrice(c.price),c.eVars=c.eVars||{},c.eVars.eVar7=c.eVars.eVar7||String(a.getData("templateName")||"UNKWN"),c.eVars.eVar40=c.eVars.eVar40||a.getDate(),c.events=c.events||{},_.isObject(c.events)&&(c.eventString=_.map(c.events,function(a,c){return a?c+"="+b.cleanProductValue(a):void 0}),c.price&&c.eventString.push("event5="+c.price),c.eventString=c.eventString.join("|")),_.isObject(c.eVars)&&(c.eVarString=_.chain(c.eVars).map(function(a,c){return a?c+"="+b.cleanProductValue(a):void 0}).compact().value().join("|")),_.map(d,function(a){return c[a]?c[a]:""}).join(";")):void 0})).join(",")}},c=function(){this.receivedErrors=[]};return c.prototype.recordError=function(a,b){this.receivedErrors.push({errorCode:a,type:b,timestamp:Date.now()})},c.prototype.getMatchingErrors=function(a,b){var c=Date.now();return _.filter(this.receivedErrors,function(d){var e=c-d.timestamp;return d.type===b&&a===d.errorCode&&5e3>e?!0:!1})},c.prototype.sendTrack=function(b){var c={errorCodes:b,errorLocation:a.getData("pageName")};a.sendEventData(c)},c.prototype.trackClientError=function(a){var b=this.getMatchingErrors(a,"client").length>0;b||(this.recordError(a,"client"),this.sendTrack(a))},c.prototype.trackServerError=function(a){var b=this.getMatchingErrors(a,"server").length>0;b||(this.recordError(a,"client"),this.sendTrack(a))},_.merge(b,{ErrorHandler:c})}),define("analytics-dotcom/pageTypes",function(){return{browse:{compare:{modules:["compare"]},deptCat:{modules:["deptCatLanding","merchandising"]},list:{modules:["productListing"],category:{modules:["categoryListing","merchandising"]},search:{modules:["search"],failed:{modules:["searchResultsFailed"]},promo:{modules:["searchResultsPromo"]},results:{modules:["searchResults"]}}},home:{modules:["homepage"]},pdp:{modules:["pdp"]},promo:{modules:["promo"]},shippingOptions:{modules:["shippingOptions"]},solutionBuilder:{modules:["solutionBuilder"]},"conditional-offers":{modules:["conditionalOffers"]}},cart:{modules:["cart","cartGiftCards","recommendations"]},checkout:{modules:["checkout","orderConfirmation","payWithPointsCheckout","recommendations"]},connectedDevices:{addLine:{modules:["addLine"]},noContract:{planList:{modules:["activatedDevices"]}},upgrade:{modules:["upgradeChecker"]}},profile:{checkoutSignIn:{modules:["checkoutSignIn"]},lifeEvents:{modules:["lifeEvents"]},account:{home:{modules:["accountHome"]},milestone:{modules:["milestone"]}},myAccount:{creditCards:{modules:["payWithPointsProfile","creditCards"]}},login:{modules:["login"]},createLogin:{modules:["createLogin"]},mobilecontract:{getMobileDevices:{modules:["manageMobileDevices"]}},modules:["profile"]},geekSquad:{repairStatus:{modules:["repairScheduling"]},renewals:{modules:["gsRenewals"]}}}}),define("analytics-dotcom/eventDataKeys",function(){return{keys:["abTest20","abTest66","abTest67","abTest68","browseMulti","BVinteraction","campaignId","cartItemCount","categoryId","ccApplication","clickAction","epClick","errorCodes","errorLocation","facetName","hierarchy","language","lastLink","legacyCodebase","linkName","pageCampaign","pageName","payWithPoints","searchRelevancyRank","searchRelevancyTerm","scEvents","scProducts","section","seePriceIn","templateName","userSearchTerm","videoTrackingString","fastTrackCheckout"],initialize:function(a){return a.resolve()}}}),define("analytics-dotcom/siteConfig",["require","sc-analytics-core/javascript/analyticsTracker","sc-analytics-core/javascript/util/logger","analytics-dotcom/pageTypes"],function(a,b,c,d){basePath="analytics-dotcom/modules/";var e={loadModules:[],getLoadModules:function(){return this.sortModules(this.loadModules)},sortModules:function(a){return a.map(function(a){var b=a.split(":"),c=10;return b.length>1&&(c=b[1]),{priority:c,module:b[0]}}).sort(function(a,b){return a.priority>b.priority?1:a.priority<b.priority?-1:0}).map(function(a){return a.module})},pageTypeModules:d,initialize:function(d){var e=this._getPageModules();return b.setOptions({observatoryConfig:this._getObservatoryConfig()}),c.setDisabledHosts(["www.bestbuy.com","www-ssl.bestbuy.com","deals.bestbuy.com"]),a(e,function(){d.resolve(arguments)}),d},_getObservatoryConfig:function(){return[{id:1,projectId:1,name:"testEvent",pageType:"profile",hasData:!1,eventDatas:[],variableMaps:[{id:1,value:"Observatory Test Event Value is Successful!!!!",eventId:1,name:"prop38"}]}]},_getPageModules:function(){var c=[],d=this._getModuleNames();if(c.push("sc-analytics-core/javascript/util/browserStorage:0"),c.push("sc-analytics-core/javascript/util/cookies:0"),c.push("sc-analytics-core/javascript/util/queryParameters:0"),c.push("analytics-dotcom/modules/global:5"),this.loadModules.push("analytics-dotcom/modules/global:5"),c.push("analytics-dotcom/modules/lidTracking:5"),c.push("sc-analytics-core/javascript/modules/observatory:5"),c.push("analytics-dotcom/modules/icrLightbox:5"),c.push("analytics-dotcom/modules/accessoryFinder:5"),c.push("analytics-dotcom/modules/storeAvailability:5"),c.push("analytics-dotcom/modules/stateChange:5"),c.push("analytics-dotcom/modules/trackEvent:5"),c.push("analytics-dotcom/modules/recommendations:5"),d.length&&_.each(d,_.bind(function(a){c.push(basePath+a),this.loadModules.push(basePath+a)},this)),window.dioExtraModules){if(!_.isArray(window.dioExtraModules))return;_.each(window.dioExtraModules,_.bind(function(b){var d;b&&b.requirePath&&(d=String(b.requirePath),a.specified(d)&&(c.push(d),b.isPageModule&&this.loadModules.push(d)))},this))}return c=this.sortModules(c),b.options.DEVMODE&&"undefined"!=typeof console&&(console.log("modules loaded:",_.unique(c)),console.log("pageType:",b.getData("pageType"))),this.loadModules=_.unique(this.loadModules),_.unique(c)},_getPageTypeModules:function(a,b,c){if(_.isArray(a.modules)&&(b=b.concat(a.modules)),c.length){var d=c.shift();return _.isObject(a[d])?this._getPageTypeModules(a[d],b,c):b}return b},_getModuleNames:function(){var a=[],c=b.getData("catId")?b.getData("catId").toLowerCase():"",d=b.getData();if(d.pageType&&$.extend(a,this._getPageTypeModules(this.pageTypeModules,[],d.pageType.split(","))),"Checkout"===d.uberCatName&&"pcat17005"!==c&&"profile,checkoutSignIn"!==d.pageType)a.push("checkout");else switch(c){case"cat12090":break;case"pcat17000":break;case"pcat17026":break;case"pcat17082":break;case"cat12047":break;case"pcat17029":a.push("creditCards");break;case"pcat17030":break;case"pcat17032":break;case"pcat17601":break;case"cat12057":break;case"cat12056":break;case"pcat17027":break;case"ss/order/ff":a.push("selfService");break;case"ss/order/cc":a.push("selfService");break;case"orderchanges.guestauthentication":a.push("selfService");break;case"fsdi_seamlessapp: cap1":a.push("fsdi")}return a}};return _.bindAll(e)}),require(["sc-analytics-core/javascript/analyticsTracker","analytics-dotcom/siteConfig","analytics-dotcom/eventDataKeys","analytics-dotcom/modules/utilities","sc-analytics-core/javascript/util/queryParameters","sc-analytics-core/javascript/util/cookies"],function(a,b,c,d,e,f){define("analytics-core/util/cookies",function(){return f}),define("analytics-core/analyticsTracker",function(){return a}),window.dioPageData=a.getData();var g=e.getQueryParams();"true"===g.analyticsdev&&a.setOptions({DEVMODE:!0}),a.options.DEVMODE&&(EventManager.debugMode?EventManager.debugMode(!0,!0):EventManager.on("all",function(a,b){console.log(JSON.stringify(a),JSON.stringify(b)),console.log(window.track)}),$(window).on("analytics:signal:SiteCatalyst",function(b,c){a.info("signal event announced:",c)}),$(window).on("analytics:signal:stateChange",function(){a.info("signal state change announced")})),a.getData("delayTrack")!==!0&&a.trigger("page:ready"),a.setOptions({signalTagSupported:!0,eventDataKeys:c.keys}),d&&$.extend(a,d),a.setAction("onBeforeSendData",function(){a.setData("scEventsArray",_.unique(a.getData("scEventsArray"))),a.setData("scEvents",a.getData("scEventsArray").join(","))}),a.setAction("onBeforeSendEvent",function(){a.clearSiteCatVars()}),a.setAction("onBeforeSendState",function(){a.clearSiteCatVars()}),require(["analytics-core/util/cookies","analytics-core/analyticsTracker"],function(){a.delayTrack().bind(a).then(function(){return this.reloadData(),this.loadModules(b.initialize)}).then(a.startTracking)}),a.when("analytics:ready",function(){window.dioFramework&&a.trigger("dio.trackEvent.ready")})});